<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>StakingAuRaBase Â· POSDAO Smart Contracts Docs</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;div class=&quot;contract-doc&quot;&gt;&lt;div class=&quot;contract&quot;&gt;&lt;h2 class=&quot;contract-header&quot;&gt;&lt;span class=&quot;contract-kind&quot;&gt;contract&lt;/span&gt; StakingAuRaBase&lt;/h2&gt;&lt;p class=&quot;base-contracts&quot;&gt;&lt;span&gt;is&lt;/span&gt; &lt;a href=&quot;upgradeability_UpgradeableOwned.html&quot;&gt;UpgradeableOwned&lt;/a&gt;&lt;span&gt;, &lt;/span&gt;&lt;a href=&quot;interfaces_IStakingAuRa.html&quot;&gt;IStakingAuRa&lt;/a&gt;&lt;/p&gt;&lt;p class=&quot;description&quot;&gt;Implements staking and withdrawal logic.&lt;/p&gt;&lt;div class=&quot;source&quot;&gt;Source: &lt;a href=&quot;https://github.com/poanetwork/posdao-contracts/blob/v0.1.5/contracts/base/StakingAuRaBase.sol&quot; target=&quot;_blank&quot;&gt;contracts/base/StakingAuRaBase.sol&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;index&quot;&gt;&lt;h2&gt;Index&lt;/h2&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#AddedPool&quot;&gt;AddedPool&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#ClaimedOrderedWithdrawal&quot;&gt;ClaimedOrderedWithdrawal&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#MovedStake&quot;&gt;MovedStake&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#OrderedWithdrawal&quot;&gt;OrderedWithdrawal&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#PlacedStake&quot;&gt;PlacedStake&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#RemovedPool&quot;&gt;RemovedPool&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#WithdrewStake&quot;&gt;WithdrewStake&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_addPoolActive&quot;&gt;_addPoolActive&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_addPoolDelegator&quot;&gt;_addPoolDelegator&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_addPoolDelegatorInactive&quot;&gt;_addPoolDelegatorInactive&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_addPoolInactive&quot;&gt;_addPoolInactive&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_addPoolToBeElected&quot;&gt;_addPoolToBeElected&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_addPoolToBeRemoved&quot;&gt;_addPoolToBeRemoved&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_deletePoolToBeElected&quot;&gt;_deletePoolToBeElected&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_deletePoolToBeRemoved&quot;&gt;_deletePoolToBeRemoved&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_getCurrentBlockNumber&quot;&gt;_getCurrentBlockNumber&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_getDelegatorStake&quot;&gt;_getDelegatorStake&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_getMaxCandidates&quot;&gt;_getMaxCandidates&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_isPoolEmpty&quot;&gt;_isPoolEmpty&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_isPoolToBeElected&quot;&gt;_isPoolToBeElected&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_isWithdrawAllowed&quot;&gt;_isWithdrawAllowed&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_removePool&quot;&gt;_removePool&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_removePoolDelegator&quot;&gt;_removePoolDelegator&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_removePoolDelegatorInactive&quot;&gt;_removePoolDelegatorInactive&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_removePoolInactive&quot;&gt;_removePoolInactive&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_sendWithdrawnStakeAmount&quot;&gt;_sendWithdrawnStakeAmount&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_setLikelihood&quot;&gt;_setLikelihood&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_snapshotDelegatorStake&quot;&gt;_snapshotDelegatorStake&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_stake&quot;&gt;_stake&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_stake&quot;&gt;_stake&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_thisBalance&quot;&gt;_thisBalance&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_withdraw&quot;&gt;_withdraw&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_withdrawCheckPool&quot;&gt;_withdrawCheckPool&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#addPool&quot;&gt;addPool&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#areStakeAndWithdrawAllowed&quot;&gt;areStakeAndWithdrawAllowed&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#claimOrderedWithdraw&quot;&gt;claimOrderedWithdraw&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#clearUnremovableValidator&quot;&gt;clearUnremovableValidator&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#&quot;&gt;fallback&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#gasPriceIsValid&quot;&gt;gasPriceIsValid&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#getPools&quot;&gt;getPools&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#getPoolsInactive&quot;&gt;getPoolsInactive&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#getPoolsLikelihood&quot;&gt;getPoolsLikelihood&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#getPoolsToBeElected&quot;&gt;getPoolsToBeElected&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#getPoolsToBeRemoved&quot;&gt;getPoolsToBeRemoved&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#getStakerPools&quot;&gt;getStakerPools&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#getStakerPoolsLength&quot;&gt;getStakerPoolsLength&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#incrementStakingEpoch&quot;&gt;incrementStakingEpoch&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#initialValidatorStake&quot;&gt;initialValidatorStake&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#initialize&quot;&gt;initialize&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#isInitialized&quot;&gt;isInitialized&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#isPoolActive&quot;&gt;isPoolActive&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#maxWithdrawAllowed&quot;&gt;maxWithdrawAllowed&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#maxWithdrawOrderAllowed&quot;&gt;maxWithdrawOrderAllowed&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#moveStake&quot;&gt;moveStake&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onTokenTransfer&quot;&gt;onTokenTransfer&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyBlockRewardContract&quot;&gt;onlyBlockRewardContract&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyInitialized&quot;&gt;onlyInitialized&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyValidatorSetContract&quot;&gt;onlyValidatorSetContract&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#orderWithdraw&quot;&gt;orderWithdraw&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#poolDelegators&quot;&gt;poolDelegators&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#poolDelegatorsInactive&quot;&gt;poolDelegatorsInactive&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#removeMyPool&quot;&gt;removeMyPool&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#removePool&quot;&gt;removePool&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#removePools&quot;&gt;removePools&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#setCandidateMinStake&quot;&gt;setCandidateMinStake&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#setDelegatorMinStake&quot;&gt;setDelegatorMinStake&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#setStakingEpochStartBlock&quot;&gt;setStakingEpochStartBlock&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#stake&quot;&gt;stake&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#stakeAmountByCurrentEpoch&quot;&gt;stakeAmountByCurrentEpoch&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#stakingEpochEndBlock&quot;&gt;stakingEpochEndBlock&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#withdraw&quot;&gt;withdraw&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;div class=&quot;reference&quot;&gt;&lt;h2&gt;Reference&lt;/h2&gt;&lt;div class=&quot;events&quot;&gt;&lt;h3&gt;Events&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;&lt;div class=&quot;item event&quot;&gt;&lt;span id=&quot;AddedPool&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;AddedPool&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;event &lt;strong&gt;AddedPool&lt;/strong&gt;&lt;span&gt;(address poolStakingAddress) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Emitted by `_addPoolActive` internal function to signal that the specified staking address created a new pool.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;poolStakingAddress&lt;/code&gt; - The staking address of newly added pool.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item event&quot;&gt;&lt;span id=&quot;ClaimedOrderedWithdrawal&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;ClaimedOrderedWithdrawal&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;event &lt;strong&gt;ClaimedOrderedWithdrawal&lt;/strong&gt;&lt;span&gt;(address fromPoolStakingAddress, address staker, uint256 stakingEpoch, uint256 amount) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Emitted by the `claimOrderedWithdraw` function to signal the staker withdrew the specified amount of requested tokens/coins from the specified pool during the specified staking epoch.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;fromPoolStakingAddress&lt;/code&gt; - The pool from which the `staker` withdrew the `amount`.&lt;/div&gt;&lt;div&gt;&lt;code&gt;staker&lt;/code&gt; - The address of the staker that withdrew the `amount`.&lt;/div&gt;&lt;div&gt;&lt;code&gt;stakingEpoch&lt;/code&gt; - The serial number of the staking epoch during which the claim was made.&lt;/div&gt;&lt;div&gt;&lt;code&gt;amount&lt;/code&gt; - The withdrawal amount.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item event&quot;&gt;&lt;span id=&quot;MovedStake&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;MovedStake&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;event &lt;strong&gt;MovedStake&lt;/strong&gt;&lt;span&gt;(address fromPoolStakingAddress, address toPoolStakingAddress, address staker, uint256 stakingEpoch, uint256 amount) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Emitted by the `moveStake` function to signal the staker moved the specified amount of stake from one pool to another during the specified staking epoch.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;fromPoolStakingAddress&lt;/code&gt; - The pool from which the `staker` moved the stake.&lt;/div&gt;&lt;div&gt;&lt;code&gt;toPoolStakingAddress&lt;/code&gt; - The destination pool where the `staker` moved the stake.&lt;/div&gt;&lt;div&gt;&lt;code&gt;staker&lt;/code&gt; - The address of the staker who moved the `amount`.&lt;/div&gt;&lt;div&gt;&lt;code&gt;stakingEpoch&lt;/code&gt; - The serial number of the staking epoch during which the `amount` was moved.&lt;/div&gt;&lt;div&gt;&lt;code&gt;amount&lt;/code&gt; - The stake amount which was moved.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item event&quot;&gt;&lt;span id=&quot;OrderedWithdrawal&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;OrderedWithdrawal&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;event &lt;strong&gt;OrderedWithdrawal&lt;/strong&gt;&lt;span&gt;(address fromPoolStakingAddress, address staker, uint256 stakingEpoch, int256 amount) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Emitted by the `orderWithdraw` function to signal the staker ordered the withdrawal of the specified amount of their stake from the specified pool during the specified staking epoch.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;fromPoolStakingAddress&lt;/code&gt; - The pool from which the `staker` ordered a withdrawal of the `amount`.&lt;/div&gt;&lt;div&gt;&lt;code&gt;staker&lt;/code&gt; - The address of the staker that ordered the withdrawal of the `amount`.&lt;/div&gt;&lt;div&gt;&lt;code&gt;stakingEpoch&lt;/code&gt; - The serial number of the staking epoch during which the order was made.&lt;/div&gt;&lt;div&gt;&lt;code&gt;amount&lt;/code&gt; - The ordered withdrawal amount. Can be either positive or negative. See the `orderWithdraw` function.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item event&quot;&gt;&lt;span id=&quot;PlacedStake&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;PlacedStake&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;event &lt;strong&gt;PlacedStake&lt;/strong&gt;&lt;span&gt;(address toPoolStakingAddress, address staker, uint256 stakingEpoch, uint256 amount) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Emitted by the `stake` function to signal the staker placed a stake of the specified amount for the specified pool during the specified staking epoch.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;toPoolStakingAddress&lt;/code&gt; - The pool in which the `staker` placed the stake.&lt;/div&gt;&lt;div&gt;&lt;code&gt;staker&lt;/code&gt; - The address of the staker that placed the stake.&lt;/div&gt;&lt;div&gt;&lt;code&gt;stakingEpoch&lt;/code&gt; - The serial number of the staking epoch during which the stake was made.&lt;/div&gt;&lt;div&gt;&lt;code&gt;amount&lt;/code&gt; - The stake amount.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item event&quot;&gt;&lt;span id=&quot;RemovedPool&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;RemovedPool&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;event &lt;strong&gt;RemovedPool&lt;/strong&gt;&lt;span&gt;(address poolStakingAddress) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Emitted by `_removePool` internal function to signal that a pool with the specified staking address was removed.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;poolStakingAddress&lt;/code&gt; - The staking address of removed pool.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item event&quot;&gt;&lt;span id=&quot;WithdrewStake&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;WithdrewStake&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;event &lt;strong&gt;WithdrewStake&lt;/strong&gt;&lt;span&gt;(address fromPoolStakingAddress, address staker, uint256 stakingEpoch, uint256 amount) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Emitted by the `withdraw` function to signal the staker withdrew the specified amount of a stake from the specified pool during the specified staking epoch.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;fromPoolStakingAddress&lt;/code&gt; - The pool from which the `staker` withdrew the `amount`.&lt;/div&gt;&lt;div&gt;&lt;code&gt;staker&lt;/code&gt; - The address of staker that withdrew the `amount`.&lt;/div&gt;&lt;div&gt;&lt;code&gt;stakingEpoch&lt;/code&gt; - The serial number of the staking epoch during which the withdrawal was made.&lt;/div&gt;&lt;div&gt;&lt;code&gt;amount&lt;/code&gt; - The withdrawal amount.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;div class=&quot;modifiers&quot;&gt;&lt;h3&gt;Modifiers&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;&lt;div class=&quot;item modifier&quot;&gt;&lt;span id=&quot;gasPriceIsValid&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;gasPriceIsValid&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;modifier &lt;strong&gt;gasPriceIsValid&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Ensures the transaction gas price is not zero.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item modifier&quot;&gt;&lt;span id=&quot;onlyBlockRewardContract&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;onlyBlockRewardContract&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;modifier &lt;strong&gt;onlyBlockRewardContract&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Ensures the caller is the BlockRewardAuRa contract address.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item modifier&quot;&gt;&lt;span id=&quot;onlyInitialized&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;onlyInitialized&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;modifier &lt;strong&gt;onlyInitialized&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Ensures the `initialize` function was called before.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item modifier&quot;&gt;&lt;span id=&quot;onlyValidatorSetContract&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;onlyValidatorSetContract&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;modifier &lt;strong&gt;onlyValidatorSetContract&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Ensures the caller is the ValidatorSetAuRa contract address.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;div class=&quot;functions&quot;&gt;&lt;h3&gt;Functions&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_addPoolActive&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_addPoolActive&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_addPoolActive&lt;/strong&gt;&lt;span&gt;(address _stakingAddress, bool _toBeElected) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Adds the specified staking address to the array of active pools returned by the `getPools` getter. Used by the `stake`, `addPool`, and `orderWithdraw` functions.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_stakingAddress&lt;/code&gt; - The pool added to the array of active pools.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_toBeElected&lt;/code&gt; - The boolean flag which defines whether the specified address should be added simultaneously to the `poolsToBeElected` array. See the `getPoolsToBeElected` getter.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_addPoolDelegator&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_addPoolDelegator&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_addPoolDelegator&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress, address _delegator) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Adds the specified address to the array of the current active delegators of the specified pool. Used by the `stake` and `orderWithdraw` functions. See the `poolDelegators` getter.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The pool staking address.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_delegator&lt;/code&gt; - The delegator&amp;#x27;s address.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_addPoolDelegatorInactive&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_addPoolDelegatorInactive&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_addPoolDelegatorInactive&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress, address _delegator) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Adds the specified address to the array of the current inactive delegators of the specified pool. Used by the `_removePoolDelegator` internal function.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The pool staking address.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_delegator&lt;/code&gt; - The delegator&amp;#x27;s address.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_addPoolInactive&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_addPoolInactive&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_addPoolInactive&lt;/strong&gt;&lt;span&gt;(address _stakingAddress) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Adds the specified staking address to the array of inactive pools returned by the `getPoolsInactive` getter. Used by the `_removePool` internal function.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_stakingAddress&lt;/code&gt; - The pool added to the array of inactive pools.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_addPoolToBeElected&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_addPoolToBeElected&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_addPoolToBeElected&lt;/strong&gt;&lt;span&gt;(address _stakingAddress) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Adds the specified staking address to the array of pools returned by the `getPoolsToBeElected` getter. Used by the `_addPoolActive` internal function. See the `getPoolsToBeElected` getter.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_stakingAddress&lt;/code&gt; - The pool added to the `poolsToBeElected` array.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_addPoolToBeRemoved&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_addPoolToBeRemoved&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_addPoolToBeRemoved&lt;/strong&gt;&lt;span&gt;(address _stakingAddress) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Adds the specified staking address to the array of pools returned by the `getPoolsToBeRemoved` getter. Used by withdrawal functions. See the `getPoolsToBeRemoved` getter.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_stakingAddress&lt;/code&gt; - The pool added to the `poolsToBeRemoved` array.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_deletePoolToBeElected&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_deletePoolToBeElected&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_deletePoolToBeElected&lt;/strong&gt;&lt;span&gt;(address _stakingAddress) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Deletes the specified staking address from the array of pools returned by the `getPoolsToBeElected` getter. Used by the `_addPoolToBeRemoved` and `_removePool` internal functions. See the `getPoolsToBeElected` getter.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_stakingAddress&lt;/code&gt; - The pool deleted from the `poolsToBeElected` array.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_deletePoolToBeRemoved&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_deletePoolToBeRemoved&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_deletePoolToBeRemoved&lt;/strong&gt;&lt;span&gt;(address _stakingAddress) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Deletes the specified staking address from the array of pools returned by the `getPoolsToBeRemoved` getter. Used by the `_addPoolToBeElected` and `_removePool` internal functions. See the `getPoolsToBeRemoved` getter.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_stakingAddress&lt;/code&gt; - The pool deleted from the `poolsToBeRemoved` array.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_getCurrentBlockNumber&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_getCurrentBlockNumber&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_getCurrentBlockNumber&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (uint256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns the current block number. Needed mostly for unit tests.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;uint256&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_getDelegatorStake&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_getDelegatorStake&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_getDelegatorStake&lt;/strong&gt;&lt;span&gt;(uint256 _epoch, uint256 _firstEpoch, uint256 _prevDelegatorStake, address _poolStakingAddress, address _delegator) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (uint256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;The internal function used by the `claimReward` function and `getRewardAmount` getter. Finds the stake amount made by a specified delegator into a specified pool before a specified staking epoch.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_epoch&lt;/code&gt; - uint256&lt;/div&gt;&lt;div&gt;&lt;code&gt;_firstEpoch&lt;/code&gt; - uint256&lt;/div&gt;&lt;div&gt;&lt;code&gt;_prevDelegatorStake&lt;/code&gt; - uint256&lt;/div&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - address&lt;/div&gt;&lt;div&gt;&lt;code&gt;_delegator&lt;/code&gt; - address&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;uint256&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_getMaxCandidates&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_getMaxCandidates&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_getMaxCandidates&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;pure &lt;/span&gt;&lt;span&gt;returns  (uint256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns the max number of candidates (including validators). See the MAX_CANDIDATES constant. Needed mostly for unit tests.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;uint256&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_isPoolEmpty&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_isPoolEmpty&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_isPoolEmpty&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (bool) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns a boolean flag indicating whether the specified pool is fully empty (all stakes are withdrawn including ordered withdrawals).&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The staking address of the pool&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;bool&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_isPoolToBeElected&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_isPoolToBeElected&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_isPoolToBeElected&lt;/strong&gt;&lt;span&gt;(address _stakingAddress) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (bool, uint256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Determines if the specified pool is in the `poolsToBeElected` array. See the `getPoolsToBeElected` getter. Used by the `_setLikelihood` internal function.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_stakingAddress&lt;/code&gt; - The staking address of the pool.&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;`bool toBeElected` - The boolean flag indicating whether the `_stakingAddress` is in the `poolsToBeElected` array. `uint256 index` - The position of the item in the `poolsToBeElected` array if `toBeElected` is `true`.&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_isWithdrawAllowed&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_isWithdrawAllowed&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_isWithdrawAllowed&lt;/strong&gt;&lt;span&gt;(address _miningAddress, bool _isDelegator) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (bool) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns `true` if withdrawal from the pool of the specified candidate/validator is allowed at the moment. Used by all withdrawal functions.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_miningAddress&lt;/code&gt; - The mining address of the validator&amp;#x27;s pool.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_isDelegator&lt;/code&gt; - Whether the withdrawal is requested by a delegator, not by a candidate/validator.&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;bool&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_removePool&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_removePool&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_removePool&lt;/strong&gt;&lt;span&gt;(address _stakingAddress) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Removes the specified staking address from the array of active pools returned by the `getPools` getter. Used by the `removePool`, `removeMyPool`, and withdrawal functions.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_stakingAddress&lt;/code&gt; - The pool removed from the array of active pools.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_removePoolDelegator&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_removePoolDelegator&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_removePoolDelegator&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress, address _delegator) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Removes the specified address from the array of the current active delegators of the specified pool. Used by the withdrawal functions. See the `poolDelegators` getter.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The pool staking address.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_delegator&lt;/code&gt; - The delegator&amp;#x27;s address.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_removePoolDelegatorInactive&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_removePoolDelegatorInactive&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_removePoolDelegatorInactive&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress, address _delegator) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Removes the specified address from the array of the inactive delegators of the specified pool. Used by the `_addPoolDelegator` and `_removePoolDelegator` internal functions.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The pool staking address.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_delegator&lt;/code&gt; - The delegator&amp;#x27;s address.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_removePoolInactive&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_removePoolInactive&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_removePoolInactive&lt;/strong&gt;&lt;span&gt;(address _stakingAddress) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Removes the specified staking address from the array of inactive pools returned by the `getPoolsInactive` getter. Used by withdrawal functions, by the `_addPoolActive` and `_removePool` internal functions.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_stakingAddress&lt;/code&gt; - The pool removed from the array of inactive pools.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_sendWithdrawnStakeAmount&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_sendWithdrawnStakeAmount&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;&lt;span&gt;abstract &lt;/span&gt;function &lt;strong&gt;_sendWithdrawnStakeAmount&lt;/strong&gt;&lt;span&gt;(address _to, uint256 _amount) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_to&lt;/code&gt; - address&lt;/div&gt;&lt;div&gt;&lt;code&gt;_amount&lt;/code&gt; - uint256&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_setLikelihood&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_setLikelihood&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_setLikelihood&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Calculates (updates) the probability of being selected as a validator for the specified pool and updates the total sum of probability coefficients. Actually, the probability is equal to the amount totally staked into the pool. See the `getPoolsLikelihood` getter. Used by the staking and withdrawal functions.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The address of the pool for which the probability coefficient must be updated.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_snapshotDelegatorStake&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_snapshotDelegatorStake&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_snapshotDelegatorStake&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress, address _delegator) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Makes a snapshot of the amount currently staked by the specified delegator into the specified pool (staking address). Used by the `orderWithdraw`, `_stake`, and `_withdraw` functions.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The staking address of the pool.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_delegator&lt;/code&gt; - The address of the delegator.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_stake&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_stake&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;&lt;span&gt;abstract &lt;/span&gt;function &lt;strong&gt;_stake&lt;/strong&gt;&lt;span&gt;(address _toPoolStakingAddress, uint256 _amount) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_toPoolStakingAddress&lt;/code&gt; - address&lt;/div&gt;&lt;div&gt;&lt;code&gt;_amount&lt;/code&gt; - uint256&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_stake&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_stake&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_stake&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress, address _staker, uint256 _amount) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;The internal function used by the `_stake` and `moveStake` functions. See the `stake` public function for more details.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The staking address of the pool where the tokens/coins should be staked.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_staker&lt;/code&gt; - The staker&amp;#x27;s address.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_amount&lt;/code&gt; - The amount of tokens/coins to be staked.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_thisBalance&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_thisBalance&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;&lt;span&gt;abstract &lt;/span&gt;function &lt;strong&gt;_thisBalance&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (uint256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns the balance of this contract in staking tokens or coins depending on implementation.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;uint256&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_withdraw&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_withdraw&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_withdraw&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress, address _staker, uint256 _amount) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;The internal function used by the `withdraw` and `moveStake` functions. See the `withdraw` public function for more details.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The staking address of the pool from which the tokens/coins should be withdrawn.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_staker&lt;/code&gt; - The staker&amp;#x27;s address.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_amount&lt;/code&gt; - The amount of the tokens/coins to be withdrawn.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_withdrawCheckPool&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_withdrawCheckPool&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_withdrawCheckPool&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress, address _staker) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;The internal function used by the `_withdraw` and `claimOrderedWithdraw` functions. Contains a common logic for these functions.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The staking address of the pool from which the tokens/coins are withdrawn.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_staker&lt;/code&gt; - The staker&amp;#x27;s address.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;addPool&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;addPool&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;addPool&lt;/strong&gt;&lt;span&gt;(uint256 _amount, address _miningAddress) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;span&gt;payable &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Adds a new candidate&amp;#x27;s pool to the list of active pools (see the `getPools` getter) and moves the specified amount of staking tokens/coins from the candidate&amp;#x27;s staking address to the candidate&amp;#x27;s pool. A participant calls this function using their staking address when they want to create a pool. This is a wrapper for the `stake` function.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_amount&lt;/code&gt; - The amount of tokens to be staked. Ignored when staking in native coins because `msg.value` is used in that case.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_miningAddress&lt;/code&gt; - The mining address of the candidate. The mining address is bound to the staking address (msg.sender). This address cannot be equal to `msg.sender`.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;areStakeAndWithdrawAllowed&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;areStakeAndWithdrawAllowed&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;areStakeAndWithdrawAllowed&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (bool) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Determines whether staking/withdrawal operations are allowed at the moment. Used by all staking/withdrawal functions.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;bool&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;claimOrderedWithdraw&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;claimOrderedWithdraw&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;claimOrderedWithdraw&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Withdraws the staking tokens/coins from the specified pool ordered during the previous staking epochs with the `orderWithdraw` function. The ordered amount can be retrieved by the `orderedWithdrawAmount` getter.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-modifiers&quot;&gt;Modifiers:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;a href=&quot;base_StakingAuRaBase.html#gasPriceIsValid&quot;&gt;gasPriceIsValid &lt;/a&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyInitialized&quot;&gt;onlyInitialized &lt;/a&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The staking address of the pool from which the ordered tokens/coins are withdrawn.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;clearUnremovableValidator&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;clearUnremovableValidator&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;clearUnremovableValidator&lt;/strong&gt;&lt;span&gt;(address _unremovableStakingAddress) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Adds the `unremovable validator` to either the `poolsToBeElected` or the `poolsToBeRemoved` array depending on their own stake in their own pool when they become removable. This allows the `ValidatorSetAuRa.newValidatorSet` function to recognize the unremovable validator as a regular removable pool. Called by the `ValidatorSet.clearUnremovableValidator` function.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-modifiers&quot;&gt;Modifiers:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyValidatorSetContract&quot;&gt;onlyValidatorSetContract &lt;/a&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_unremovableStakingAddress&lt;/code&gt; - The staking address of the unremovable validator.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;fallback&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;fallback&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;span&gt;payable &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Fallback function. Prevents direct sending native coins to this contract.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;getPools&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;getPools&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;getPools&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (address[]) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns an array of the current active pools (the staking addresses of candidates and validators). The size of the array cannot exceed MAX_CANDIDATES. A pool can be added to this array with the `_addPoolActive` internal function which is called by the `stake` or `orderWithdraw` function. A pool is considered active if its address has at least the minimum stake and this stake is not ordered to be withdrawn.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;address[]&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;getPoolsInactive&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;getPoolsInactive&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;getPoolsInactive&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (address[]) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns an array of the current inactive pools (the staking addresses of former candidates). A pool can be added to this array with the `_addPoolInactive` internal function which is called by `_removePool`. A pool is considered inactive if it is banned for some reason, if its address has zero stake, or if its entire stake is ordered to be withdrawn.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;address[]&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;getPoolsLikelihood&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;getPoolsLikelihood&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;getPoolsLikelihood&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (uint256[], uint256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns the array of stake amounts for each corresponding address in the `poolsToBeElected` array (see the `getPoolsToBeElected` getter) and a sum of these amounts. Used by the `ValidatorSetAuRa.newValidatorSet` function when randomly selecting new validators at the last block of a staking epoch. An array value is updated every time any staked amount is changed in this pool (see the `_setLikelihood` internal function).&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;`uint256[] likelihoods` - The array of the coefficients. The array length is always equal to the length of the `poolsToBeElected` array. `uint256 sum` - The total sum of the amounts.&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;getPoolsToBeElected&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;getPoolsToBeElected&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;getPoolsToBeElected&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (address[]) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns the list of pools (their staking addresses) which will participate in a new validator set selection process in the `ValidatorSetAuRa.newValidatorSet` function. This is an array of pools which will be considered as candidates when forming a new validator set (at the last block of a staking epoch). This array is kept updated by the `_addPoolToBeElected` and `_deletePoolToBeElected` internal functions.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;address[]&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;getPoolsToBeRemoved&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;getPoolsToBeRemoved&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;getPoolsToBeRemoved&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (address[]) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns the list of pools (their staking addresses) which will be removed by the `ValidatorSetAuRa.newValidatorSet` function from the active `pools` array (at the last block of a staking epoch). This array is kept updated by the `_addPoolToBeRemoved` and `_deletePoolToBeRemoved` internal functions. A pool is added to this array when the pool&amp;#x27;s address withdraws (or orders) all of its own staking tokens from the pool, inactivating the pool.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;address[]&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;getStakerPools&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;getStakerPools&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;getStakerPools&lt;/strong&gt;&lt;span&gt;(address _staker, uint256 _offset, uint256 _length) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (address[]) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns the list of pools (staking addresses) into which the specified staker have ever staked.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_staker&lt;/code&gt; - The staker address (it can be a delegator or a pool staking address itself).&lt;/div&gt;&lt;div&gt;&lt;code&gt;_offset&lt;/code&gt; - The index in the array at which the reading should start. Ignored if the `_length` is 0.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_length&lt;/code&gt; - The max number of items to return.&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;address[]&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;getStakerPoolsLength&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;getStakerPoolsLength&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;getStakerPoolsLength&lt;/strong&gt;&lt;span&gt;(address _staker) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (uint256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns the length of the list of pools into which the specified staker have ever staked.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_staker&lt;/code&gt; - The staker address (it can be a delegator or a pool staking address itself).&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;uint256&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;incrementStakingEpoch&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;incrementStakingEpoch&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;incrementStakingEpoch&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Increments the serial number of the current staking epoch. Called by the `ValidatorSetAuRa.newValidatorSet` at the last block of the finished staking epoch.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-modifiers&quot;&gt;Modifiers:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyValidatorSetContract&quot;&gt;onlyValidatorSetContract &lt;/a&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;initialValidatorStake&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;initialValidatorStake&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;initialValidatorStake&lt;/strong&gt;&lt;span&gt;(uint256 _totalAmount) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Makes initial validator stakes. Can only be called by the owner before the network starts (after `initialize` is called but before `stakingEpochStartBlock`). Cannot be called more than once and cannot be called when starting from genesis. Requires `StakingAuRa` contract balance to be equal to the `_totalAmount`.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-modifiers&quot;&gt;Modifiers:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;a href=&quot;upgradeability_UpgradeableOwned.html#onlyOwner&quot;&gt;onlyOwner &lt;/a&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_totalAmount&lt;/code&gt; - The initial validator total stake amount (for all initial validators).&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;initialize&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;initialize&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;initialize&lt;/strong&gt;&lt;span&gt;(address _validatorSetContract, address[] _initialStakingAddresses, uint256 _delegatorMinStake, uint256 _candidateMinStake, uint256 _stakingEpochDuration, uint256 _stakingEpochStartBlock, uint256 _stakeWithdrawDisallowPeriod) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Initializes the network parameters. Can only be called by the constructor of the `InitializerAuRa` contract or owner.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_validatorSetContract&lt;/code&gt; - The address of the `ValidatorSetAuRa` contract.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_initialStakingAddresses&lt;/code&gt; - The array of initial validators&amp;#x27; staking addresses.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_delegatorMinStake&lt;/code&gt; - The minimum allowed amount of delegator stake in Wei.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_candidateMinStake&lt;/code&gt; - The minimum allowed amount of candidate/validator stake in Wei.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_stakingEpochDuration&lt;/code&gt; - The duration of a staking epoch in blocks (e.g., 120954 = 1 week for 5-seconds blocks in AuRa).&lt;/div&gt;&lt;div&gt;&lt;code&gt;_stakingEpochStartBlock&lt;/code&gt; - The number of the first block of initial staking epoch (must be zero if the network is starting from genesis block).&lt;/div&gt;&lt;div&gt;&lt;code&gt;_stakeWithdrawDisallowPeriod&lt;/code&gt; - The duration period (in blocks) at the end of a staking epoch during which participants cannot stake/withdraw/order/claim their staking tokens/coins (e.g., 4320 = 6 hours for 5-seconds blocks in AuRa).&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;isInitialized&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;isInitialized&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;isInitialized&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (bool) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns a boolean flag indicating if the `initialize` function has been called.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;bool&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;isPoolActive&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;isPoolActive&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;isPoolActive&lt;/strong&gt;&lt;span&gt;(address _stakingAddress) &lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (bool) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns a flag indicating whether a specified address is in the `pools` array. See the `getPools` getter.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_stakingAddress&lt;/code&gt; - The staking address of the pool.&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;bool&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;maxWithdrawAllowed&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;maxWithdrawAllowed&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;maxWithdrawAllowed&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress, address _staker) &lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (uint256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns the maximum amount which can be withdrawn from the specified pool by the specified staker at the moment. Used by the `withdraw` and `moveStake` functions.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The pool staking address from which the withdrawal will be made.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_staker&lt;/code&gt; - The staker address that is going to withdraw.&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;uint256&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;maxWithdrawOrderAllowed&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;maxWithdrawOrderAllowed&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;maxWithdrawOrderAllowed&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress, address _staker) &lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (uint256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns the maximum amount which can be ordered to be withdrawn from the specified pool by the specified staker at the moment. Used by the `orderWithdraw` function.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The pool staking address from which the withdrawal will be ordered.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_staker&lt;/code&gt; - The staker address that is going to order the withdrawal.&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;uint256&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;moveStake&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;moveStake&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;moveStake&lt;/strong&gt;&lt;span&gt;(address _fromPoolStakingAddress, address _toPoolStakingAddress, uint256 _amount) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Moves staking tokens/coins from one pool to another. A staker calls this function when they want to move their tokens/coins from one pool to another without withdrawing their tokens/coins.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-modifiers&quot;&gt;Modifiers:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;a href=&quot;base_StakingAuRaBase.html#gasPriceIsValid&quot;&gt;gasPriceIsValid &lt;/a&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyInitialized&quot;&gt;onlyInitialized &lt;/a&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_fromPoolStakingAddress&lt;/code&gt; - The staking address of the source pool.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_toPoolStakingAddress&lt;/code&gt; - The staking address of the target pool.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_amount&lt;/code&gt; - The amount of staking tokens/coins to be moved. The amount cannot exceed the value returned by the `maxWithdrawAllowed` getter.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;onTokenTransfer&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;onTokenTransfer&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;onTokenTransfer&lt;/strong&gt;&lt;span&gt;(address , uint256 , bytes ) &lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;pure &lt;/span&gt;&lt;span&gt;returns  (bool) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Prevents sending tokens directly to the `StakingAuRa` contract address by the `ERC677BridgeTokenRewardable.transferAndCall` function.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;&lt;/code&gt; - address&lt;/div&gt;&lt;div&gt;&lt;code&gt;&lt;/code&gt; - uint256&lt;/div&gt;&lt;div&gt;&lt;code&gt;&lt;/code&gt; - bytes&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;bool&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;orderWithdraw&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;orderWithdraw&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;orderWithdraw&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress, int256 _amount) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Orders tokens/coins withdrawal from the staking address of the specified pool to the staker&amp;#x27;s address. The requested tokens/coins can be claimed after the current staking epoch is complete using the `claimOrderedWithdraw` function.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-modifiers&quot;&gt;Modifiers:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;a href=&quot;base_StakingAuRaBase.html#gasPriceIsValid&quot;&gt;gasPriceIsValid &lt;/a&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyInitialized&quot;&gt;onlyInitialized &lt;/a&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The staking address of the pool from which the amount will be withdrawn.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_amount&lt;/code&gt; - The amount to be withdrawn. A positive value means the staker wants to either set or increase their withdrawal amount. A negative value means the staker wants to decrease a withdrawal amount that was previously set. The amount cannot exceed the value returned by the `maxWithdrawOrderAllowed` getter.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;poolDelegators&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;poolDelegators&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;poolDelegators&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress) &lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (address[]) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns an array of the current active delegators of the specified pool. A delegator is considered active if they have staked into the specified pool and their stake is not ordered to be withdrawn.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The pool staking address.&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;address[]&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;poolDelegatorsInactive&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;poolDelegatorsInactive&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;poolDelegatorsInactive&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress) &lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (address[]) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns an array of the current inactive delegators of the specified pool. A delegator is considered inactive if their entire stake is ordered to be withdrawn but not yet claimed.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The pool staking address.&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;address[]&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;removeMyPool&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;removeMyPool&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;removeMyPool&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Removes the candidate&amp;#x27;s or validator&amp;#x27;s pool from the `pools` array (a list of active pools which can be retrieved by the `getPools` getter). When a candidate or validator wants to remove their pool, they should call this function from their staking address. A validator cannot remove their pool while they are an `unremovable validator`.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-modifiers&quot;&gt;Modifiers:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;a href=&quot;base_StakingAuRaBase.html#gasPriceIsValid&quot;&gt;gasPriceIsValid &lt;/a&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyInitialized&quot;&gt;onlyInitialized &lt;/a&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;removePool&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;removePool&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;removePool&lt;/strong&gt;&lt;span&gt;(address _stakingAddress) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Removes a specified pool from the `pools` array (a list of active pools which can be retrieved by the `getPools` getter). Called by the `ValidatorSetAuRa._removeMaliciousValidator` internal function when a pool must be removed by the algorithm.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-modifiers&quot;&gt;Modifiers:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyValidatorSetContract&quot;&gt;onlyValidatorSetContract &lt;/a&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_stakingAddress&lt;/code&gt; - The staking address of the pool to be removed.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;removePools&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;removePools&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;removePools&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Removes pools which are in the `_poolsToBeRemoved` internal array from the `pools` array. Called by the `ValidatorSetAuRa.newValidatorSet` function when a pool must be removed by the algorithm.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-modifiers&quot;&gt;Modifiers:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyValidatorSetContract&quot;&gt;onlyValidatorSetContract &lt;/a&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;setCandidateMinStake&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;setCandidateMinStake&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;setCandidateMinStake&lt;/strong&gt;&lt;span&gt;(uint256 _minStake) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Sets (updates) the limit of the minimum candidate stake (CANDIDATE_MIN_STAKE). Can only be called by the `owner`.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-modifiers&quot;&gt;Modifiers:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;a href=&quot;upgradeability_UpgradeableOwned.html#onlyOwner&quot;&gt;onlyOwner &lt;/a&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyInitialized&quot;&gt;onlyInitialized &lt;/a&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_minStake&lt;/code&gt; - The value of a new limit in Wei.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;setDelegatorMinStake&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;setDelegatorMinStake&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;setDelegatorMinStake&lt;/strong&gt;&lt;span&gt;(uint256 _minStake) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Sets (updates) the limit of the minimum delegator stake (DELEGATOR_MIN_STAKE). Can only be called by the `owner`.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-modifiers&quot;&gt;Modifiers:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;a href=&quot;upgradeability_UpgradeableOwned.html#onlyOwner&quot;&gt;onlyOwner &lt;/a&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyInitialized&quot;&gt;onlyInitialized &lt;/a&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_minStake&lt;/code&gt; - The value of a new limit in Wei.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;setStakingEpochStartBlock&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;setStakingEpochStartBlock&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;setStakingEpochStartBlock&lt;/strong&gt;&lt;span&gt;(uint256 _blockNumber) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Sets the number of the first block in the upcoming staking epoch. Called by the `ValidatorSetAuRa.newValidatorSet` function at the last block of a staking epoch.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-modifiers&quot;&gt;Modifiers:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyValidatorSetContract&quot;&gt;onlyValidatorSetContract &lt;/a&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_blockNumber&lt;/code&gt; - The number of the very first block in the upcoming staking epoch.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;stake&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;stake&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;stake&lt;/strong&gt;&lt;span&gt;(address _toPoolStakingAddress, uint256 _amount) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;span&gt;payable &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Moves the specified amount of staking tokens/coins from the staker&amp;#x27;s address to the staking address of the specified pool. Actually, the amount is stored in a balance of this StakingAuRa contract. A staker calls this function when they want to make a stake into a pool.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_toPoolStakingAddress&lt;/code&gt; - The staking address of the pool where the tokens should be staked.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_amount&lt;/code&gt; - The amount of tokens to be staked. Ignored when staking in native coins because `msg.value` is used instead.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;stakeAmountByCurrentEpoch&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;stakeAmountByCurrentEpoch&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;stakeAmountByCurrentEpoch&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress, address _staker) &lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (uint256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns the amount of staking tokens/coins staked into the specified pool by the specified staker during the current staking epoch (see the `stakingEpoch` getter). Used by the `stake`, `withdraw`, and `orderWithdraw` functions.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The pool staking address.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_staker&lt;/code&gt; - The staker&amp;#x27;s address.&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;uint256&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;stakingEpochEndBlock&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;stakingEpochEndBlock&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;stakingEpochEndBlock&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (uint256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns the number of the last block of the current staking epoch.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;uint256&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;withdraw&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;withdraw&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;withdraw&lt;/strong&gt;&lt;span&gt;(address _fromPoolStakingAddress, uint256 _amount) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Moves the specified amount of staking tokens/coins from the staking address of the specified pool to the staker&amp;#x27;s address. A staker calls this function when they want to withdraw their tokens/coins.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-modifiers&quot;&gt;Modifiers:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;a href=&quot;base_StakingAuRaBase.html#gasPriceIsValid&quot;&gt;gasPriceIsValid &lt;/a&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyInitialized&quot;&gt;onlyInitialized &lt;/a&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_fromPoolStakingAddress&lt;/code&gt; - The staking address of the pool from which the tokens/coins should be withdrawn.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_amount&lt;/code&gt; - The amount of tokens/coins to be withdrawn. The amount cannot exceed the value returned by the `maxWithdrawAllowed` getter.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="StakingAuRaBase Â· POSDAO Smart Contracts Docs"/><meta property="og:type" content="website"/><meta property="og:url" content="https://poanetwork.github.io/posdao-contracts/index.html"/><meta property="og:description" content="&lt;div class=&quot;contract-doc&quot;&gt;&lt;div class=&quot;contract&quot;&gt;&lt;h2 class=&quot;contract-header&quot;&gt;&lt;span class=&quot;contract-kind&quot;&gt;contract&lt;/span&gt; StakingAuRaBase&lt;/h2&gt;&lt;p class=&quot;base-contracts&quot;&gt;&lt;span&gt;is&lt;/span&gt; &lt;a href=&quot;upgradeability_UpgradeableOwned.html&quot;&gt;UpgradeableOwned&lt;/a&gt;&lt;span&gt;, &lt;/span&gt;&lt;a href=&quot;interfaces_IStakingAuRa.html&quot;&gt;IStakingAuRa&lt;/a&gt;&lt;/p&gt;&lt;p class=&quot;description&quot;&gt;Implements staking and withdrawal logic.&lt;/p&gt;&lt;div class=&quot;source&quot;&gt;Source: &lt;a href=&quot;https://github.com/poanetwork/posdao-contracts/blob/v0.1.5/contracts/base/StakingAuRaBase.sol&quot; target=&quot;_blank&quot;&gt;contracts/base/StakingAuRaBase.sol&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;index&quot;&gt;&lt;h2&gt;Index&lt;/h2&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#AddedPool&quot;&gt;AddedPool&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#ClaimedOrderedWithdrawal&quot;&gt;ClaimedOrderedWithdrawal&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#MovedStake&quot;&gt;MovedStake&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#OrderedWithdrawal&quot;&gt;OrderedWithdrawal&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#PlacedStake&quot;&gt;PlacedStake&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#RemovedPool&quot;&gt;RemovedPool&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#WithdrewStake&quot;&gt;WithdrewStake&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_addPoolActive&quot;&gt;_addPoolActive&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_addPoolDelegator&quot;&gt;_addPoolDelegator&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_addPoolDelegatorInactive&quot;&gt;_addPoolDelegatorInactive&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_addPoolInactive&quot;&gt;_addPoolInactive&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_addPoolToBeElected&quot;&gt;_addPoolToBeElected&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_addPoolToBeRemoved&quot;&gt;_addPoolToBeRemoved&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_deletePoolToBeElected&quot;&gt;_deletePoolToBeElected&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_deletePoolToBeRemoved&quot;&gt;_deletePoolToBeRemoved&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_getCurrentBlockNumber&quot;&gt;_getCurrentBlockNumber&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_getDelegatorStake&quot;&gt;_getDelegatorStake&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_getMaxCandidates&quot;&gt;_getMaxCandidates&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_isPoolEmpty&quot;&gt;_isPoolEmpty&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_isPoolToBeElected&quot;&gt;_isPoolToBeElected&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_isWithdrawAllowed&quot;&gt;_isWithdrawAllowed&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_removePool&quot;&gt;_removePool&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_removePoolDelegator&quot;&gt;_removePoolDelegator&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_removePoolDelegatorInactive&quot;&gt;_removePoolDelegatorInactive&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_removePoolInactive&quot;&gt;_removePoolInactive&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_sendWithdrawnStakeAmount&quot;&gt;_sendWithdrawnStakeAmount&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_setLikelihood&quot;&gt;_setLikelihood&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_snapshotDelegatorStake&quot;&gt;_snapshotDelegatorStake&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_stake&quot;&gt;_stake&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_stake&quot;&gt;_stake&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_thisBalance&quot;&gt;_thisBalance&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_withdraw&quot;&gt;_withdraw&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#_withdrawCheckPool&quot;&gt;_withdrawCheckPool&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#addPool&quot;&gt;addPool&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#areStakeAndWithdrawAllowed&quot;&gt;areStakeAndWithdrawAllowed&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#claimOrderedWithdraw&quot;&gt;claimOrderedWithdraw&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#clearUnremovableValidator&quot;&gt;clearUnremovableValidator&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#&quot;&gt;fallback&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#gasPriceIsValid&quot;&gt;gasPriceIsValid&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#getPools&quot;&gt;getPools&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#getPoolsInactive&quot;&gt;getPoolsInactive&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#getPoolsLikelihood&quot;&gt;getPoolsLikelihood&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#getPoolsToBeElected&quot;&gt;getPoolsToBeElected&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#getPoolsToBeRemoved&quot;&gt;getPoolsToBeRemoved&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#getStakerPools&quot;&gt;getStakerPools&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#getStakerPoolsLength&quot;&gt;getStakerPoolsLength&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#incrementStakingEpoch&quot;&gt;incrementStakingEpoch&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#initialValidatorStake&quot;&gt;initialValidatorStake&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#initialize&quot;&gt;initialize&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#isInitialized&quot;&gt;isInitialized&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#isPoolActive&quot;&gt;isPoolActive&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#maxWithdrawAllowed&quot;&gt;maxWithdrawAllowed&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#maxWithdrawOrderAllowed&quot;&gt;maxWithdrawOrderAllowed&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#moveStake&quot;&gt;moveStake&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onTokenTransfer&quot;&gt;onTokenTransfer&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyBlockRewardContract&quot;&gt;onlyBlockRewardContract&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyInitialized&quot;&gt;onlyInitialized&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyValidatorSetContract&quot;&gt;onlyValidatorSetContract&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#orderWithdraw&quot;&gt;orderWithdraw&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#poolDelegators&quot;&gt;poolDelegators&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#poolDelegatorsInactive&quot;&gt;poolDelegatorsInactive&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#removeMyPool&quot;&gt;removeMyPool&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#removePool&quot;&gt;removePool&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#removePools&quot;&gt;removePools&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#setCandidateMinStake&quot;&gt;setCandidateMinStake&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#setDelegatorMinStake&quot;&gt;setDelegatorMinStake&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#setStakingEpochStartBlock&quot;&gt;setStakingEpochStartBlock&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#stake&quot;&gt;stake&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#stakeAmountByCurrentEpoch&quot;&gt;stakeAmountByCurrentEpoch&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#stakingEpochEndBlock&quot;&gt;stakingEpochEndBlock&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;base_StakingAuRaBase.html#withdraw&quot;&gt;withdraw&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;div class=&quot;reference&quot;&gt;&lt;h2&gt;Reference&lt;/h2&gt;&lt;div class=&quot;events&quot;&gt;&lt;h3&gt;Events&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;&lt;div class=&quot;item event&quot;&gt;&lt;span id=&quot;AddedPool&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;AddedPool&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;event &lt;strong&gt;AddedPool&lt;/strong&gt;&lt;span&gt;(address poolStakingAddress) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Emitted by `_addPoolActive` internal function to signal that the specified staking address created a new pool.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;poolStakingAddress&lt;/code&gt; - The staking address of newly added pool.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item event&quot;&gt;&lt;span id=&quot;ClaimedOrderedWithdrawal&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;ClaimedOrderedWithdrawal&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;event &lt;strong&gt;ClaimedOrderedWithdrawal&lt;/strong&gt;&lt;span&gt;(address fromPoolStakingAddress, address staker, uint256 stakingEpoch, uint256 amount) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Emitted by the `claimOrderedWithdraw` function to signal the staker withdrew the specified amount of requested tokens/coins from the specified pool during the specified staking epoch.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;fromPoolStakingAddress&lt;/code&gt; - The pool from which the `staker` withdrew the `amount`.&lt;/div&gt;&lt;div&gt;&lt;code&gt;staker&lt;/code&gt; - The address of the staker that withdrew the `amount`.&lt;/div&gt;&lt;div&gt;&lt;code&gt;stakingEpoch&lt;/code&gt; - The serial number of the staking epoch during which the claim was made.&lt;/div&gt;&lt;div&gt;&lt;code&gt;amount&lt;/code&gt; - The withdrawal amount.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item event&quot;&gt;&lt;span id=&quot;MovedStake&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;MovedStake&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;event &lt;strong&gt;MovedStake&lt;/strong&gt;&lt;span&gt;(address fromPoolStakingAddress, address toPoolStakingAddress, address staker, uint256 stakingEpoch, uint256 amount) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Emitted by the `moveStake` function to signal the staker moved the specified amount of stake from one pool to another during the specified staking epoch.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;fromPoolStakingAddress&lt;/code&gt; - The pool from which the `staker` moved the stake.&lt;/div&gt;&lt;div&gt;&lt;code&gt;toPoolStakingAddress&lt;/code&gt; - The destination pool where the `staker` moved the stake.&lt;/div&gt;&lt;div&gt;&lt;code&gt;staker&lt;/code&gt; - The address of the staker who moved the `amount`.&lt;/div&gt;&lt;div&gt;&lt;code&gt;stakingEpoch&lt;/code&gt; - The serial number of the staking epoch during which the `amount` was moved.&lt;/div&gt;&lt;div&gt;&lt;code&gt;amount&lt;/code&gt; - The stake amount which was moved.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item event&quot;&gt;&lt;span id=&quot;OrderedWithdrawal&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;OrderedWithdrawal&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;event &lt;strong&gt;OrderedWithdrawal&lt;/strong&gt;&lt;span&gt;(address fromPoolStakingAddress, address staker, uint256 stakingEpoch, int256 amount) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Emitted by the `orderWithdraw` function to signal the staker ordered the withdrawal of the specified amount of their stake from the specified pool during the specified staking epoch.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;fromPoolStakingAddress&lt;/code&gt; - The pool from which the `staker` ordered a withdrawal of the `amount`.&lt;/div&gt;&lt;div&gt;&lt;code&gt;staker&lt;/code&gt; - The address of the staker that ordered the withdrawal of the `amount`.&lt;/div&gt;&lt;div&gt;&lt;code&gt;stakingEpoch&lt;/code&gt; - The serial number of the staking epoch during which the order was made.&lt;/div&gt;&lt;div&gt;&lt;code&gt;amount&lt;/code&gt; - The ordered withdrawal amount. Can be either positive or negative. See the `orderWithdraw` function.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item event&quot;&gt;&lt;span id=&quot;PlacedStake&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;PlacedStake&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;event &lt;strong&gt;PlacedStake&lt;/strong&gt;&lt;span&gt;(address toPoolStakingAddress, address staker, uint256 stakingEpoch, uint256 amount) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Emitted by the `stake` function to signal the staker placed a stake of the specified amount for the specified pool during the specified staking epoch.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;toPoolStakingAddress&lt;/code&gt; - The pool in which the `staker` placed the stake.&lt;/div&gt;&lt;div&gt;&lt;code&gt;staker&lt;/code&gt; - The address of the staker that placed the stake.&lt;/div&gt;&lt;div&gt;&lt;code&gt;stakingEpoch&lt;/code&gt; - The serial number of the staking epoch during which the stake was made.&lt;/div&gt;&lt;div&gt;&lt;code&gt;amount&lt;/code&gt; - The stake amount.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item event&quot;&gt;&lt;span id=&quot;RemovedPool&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;RemovedPool&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;event &lt;strong&gt;RemovedPool&lt;/strong&gt;&lt;span&gt;(address poolStakingAddress) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Emitted by `_removePool` internal function to signal that a pool with the specified staking address was removed.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;poolStakingAddress&lt;/code&gt; - The staking address of removed pool.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item event&quot;&gt;&lt;span id=&quot;WithdrewStake&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;WithdrewStake&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;event &lt;strong&gt;WithdrewStake&lt;/strong&gt;&lt;span&gt;(address fromPoolStakingAddress, address staker, uint256 stakingEpoch, uint256 amount) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Emitted by the `withdraw` function to signal the staker withdrew the specified amount of a stake from the specified pool during the specified staking epoch.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;fromPoolStakingAddress&lt;/code&gt; - The pool from which the `staker` withdrew the `amount`.&lt;/div&gt;&lt;div&gt;&lt;code&gt;staker&lt;/code&gt; - The address of staker that withdrew the `amount`.&lt;/div&gt;&lt;div&gt;&lt;code&gt;stakingEpoch&lt;/code&gt; - The serial number of the staking epoch during which the withdrawal was made.&lt;/div&gt;&lt;div&gt;&lt;code&gt;amount&lt;/code&gt; - The withdrawal amount.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;div class=&quot;modifiers&quot;&gt;&lt;h3&gt;Modifiers&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;&lt;div class=&quot;item modifier&quot;&gt;&lt;span id=&quot;gasPriceIsValid&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;gasPriceIsValid&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;modifier &lt;strong&gt;gasPriceIsValid&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Ensures the transaction gas price is not zero.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item modifier&quot;&gt;&lt;span id=&quot;onlyBlockRewardContract&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;onlyBlockRewardContract&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;modifier &lt;strong&gt;onlyBlockRewardContract&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Ensures the caller is the BlockRewardAuRa contract address.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item modifier&quot;&gt;&lt;span id=&quot;onlyInitialized&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;onlyInitialized&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;modifier &lt;strong&gt;onlyInitialized&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Ensures the `initialize` function was called before.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item modifier&quot;&gt;&lt;span id=&quot;onlyValidatorSetContract&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;onlyValidatorSetContract&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;modifier &lt;strong&gt;onlyValidatorSetContract&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Ensures the caller is the ValidatorSetAuRa contract address.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;div class=&quot;functions&quot;&gt;&lt;h3&gt;Functions&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_addPoolActive&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_addPoolActive&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_addPoolActive&lt;/strong&gt;&lt;span&gt;(address _stakingAddress, bool _toBeElected) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Adds the specified staking address to the array of active pools returned by the `getPools` getter. Used by the `stake`, `addPool`, and `orderWithdraw` functions.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_stakingAddress&lt;/code&gt; - The pool added to the array of active pools.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_toBeElected&lt;/code&gt; - The boolean flag which defines whether the specified address should be added simultaneously to the `poolsToBeElected` array. See the `getPoolsToBeElected` getter.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_addPoolDelegator&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_addPoolDelegator&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_addPoolDelegator&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress, address _delegator) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Adds the specified address to the array of the current active delegators of the specified pool. Used by the `stake` and `orderWithdraw` functions. See the `poolDelegators` getter.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The pool staking address.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_delegator&lt;/code&gt; - The delegator&amp;#x27;s address.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_addPoolDelegatorInactive&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_addPoolDelegatorInactive&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_addPoolDelegatorInactive&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress, address _delegator) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Adds the specified address to the array of the current inactive delegators of the specified pool. Used by the `_removePoolDelegator` internal function.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The pool staking address.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_delegator&lt;/code&gt; - The delegator&amp;#x27;s address.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_addPoolInactive&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_addPoolInactive&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_addPoolInactive&lt;/strong&gt;&lt;span&gt;(address _stakingAddress) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Adds the specified staking address to the array of inactive pools returned by the `getPoolsInactive` getter. Used by the `_removePool` internal function.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_stakingAddress&lt;/code&gt; - The pool added to the array of inactive pools.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_addPoolToBeElected&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_addPoolToBeElected&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_addPoolToBeElected&lt;/strong&gt;&lt;span&gt;(address _stakingAddress) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Adds the specified staking address to the array of pools returned by the `getPoolsToBeElected` getter. Used by the `_addPoolActive` internal function. See the `getPoolsToBeElected` getter.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_stakingAddress&lt;/code&gt; - The pool added to the `poolsToBeElected` array.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_addPoolToBeRemoved&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_addPoolToBeRemoved&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_addPoolToBeRemoved&lt;/strong&gt;&lt;span&gt;(address _stakingAddress) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Adds the specified staking address to the array of pools returned by the `getPoolsToBeRemoved` getter. Used by withdrawal functions. See the `getPoolsToBeRemoved` getter.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_stakingAddress&lt;/code&gt; - The pool added to the `poolsToBeRemoved` array.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_deletePoolToBeElected&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_deletePoolToBeElected&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_deletePoolToBeElected&lt;/strong&gt;&lt;span&gt;(address _stakingAddress) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Deletes the specified staking address from the array of pools returned by the `getPoolsToBeElected` getter. Used by the `_addPoolToBeRemoved` and `_removePool` internal functions. See the `getPoolsToBeElected` getter.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_stakingAddress&lt;/code&gt; - The pool deleted from the `poolsToBeElected` array.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_deletePoolToBeRemoved&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_deletePoolToBeRemoved&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_deletePoolToBeRemoved&lt;/strong&gt;&lt;span&gt;(address _stakingAddress) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Deletes the specified staking address from the array of pools returned by the `getPoolsToBeRemoved` getter. Used by the `_addPoolToBeElected` and `_removePool` internal functions. See the `getPoolsToBeRemoved` getter.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_stakingAddress&lt;/code&gt; - The pool deleted from the `poolsToBeRemoved` array.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_getCurrentBlockNumber&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_getCurrentBlockNumber&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_getCurrentBlockNumber&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (uint256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns the current block number. Needed mostly for unit tests.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;uint256&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_getDelegatorStake&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_getDelegatorStake&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_getDelegatorStake&lt;/strong&gt;&lt;span&gt;(uint256 _epoch, uint256 _firstEpoch, uint256 _prevDelegatorStake, address _poolStakingAddress, address _delegator) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (uint256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;The internal function used by the `claimReward` function and `getRewardAmount` getter. Finds the stake amount made by a specified delegator into a specified pool before a specified staking epoch.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_epoch&lt;/code&gt; - uint256&lt;/div&gt;&lt;div&gt;&lt;code&gt;_firstEpoch&lt;/code&gt; - uint256&lt;/div&gt;&lt;div&gt;&lt;code&gt;_prevDelegatorStake&lt;/code&gt; - uint256&lt;/div&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - address&lt;/div&gt;&lt;div&gt;&lt;code&gt;_delegator&lt;/code&gt; - address&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;uint256&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_getMaxCandidates&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_getMaxCandidates&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_getMaxCandidates&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;pure &lt;/span&gt;&lt;span&gt;returns  (uint256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns the max number of candidates (including validators). See the MAX_CANDIDATES constant. Needed mostly for unit tests.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;uint256&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_isPoolEmpty&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_isPoolEmpty&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_isPoolEmpty&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (bool) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns a boolean flag indicating whether the specified pool is fully empty (all stakes are withdrawn including ordered withdrawals).&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The staking address of the pool&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;bool&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_isPoolToBeElected&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_isPoolToBeElected&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_isPoolToBeElected&lt;/strong&gt;&lt;span&gt;(address _stakingAddress) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (bool, uint256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Determines if the specified pool is in the `poolsToBeElected` array. See the `getPoolsToBeElected` getter. Used by the `_setLikelihood` internal function.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_stakingAddress&lt;/code&gt; - The staking address of the pool.&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;`bool toBeElected` - The boolean flag indicating whether the `_stakingAddress` is in the `poolsToBeElected` array. `uint256 index` - The position of the item in the `poolsToBeElected` array if `toBeElected` is `true`.&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_isWithdrawAllowed&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_isWithdrawAllowed&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_isWithdrawAllowed&lt;/strong&gt;&lt;span&gt;(address _miningAddress, bool _isDelegator) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (bool) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns `true` if withdrawal from the pool of the specified candidate/validator is allowed at the moment. Used by all withdrawal functions.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_miningAddress&lt;/code&gt; - The mining address of the validator&amp;#x27;s pool.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_isDelegator&lt;/code&gt; - Whether the withdrawal is requested by a delegator, not by a candidate/validator.&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;bool&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_removePool&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_removePool&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_removePool&lt;/strong&gt;&lt;span&gt;(address _stakingAddress) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Removes the specified staking address from the array of active pools returned by the `getPools` getter. Used by the `removePool`, `removeMyPool`, and withdrawal functions.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_stakingAddress&lt;/code&gt; - The pool removed from the array of active pools.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_removePoolDelegator&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_removePoolDelegator&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_removePoolDelegator&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress, address _delegator) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Removes the specified address from the array of the current active delegators of the specified pool. Used by the withdrawal functions. See the `poolDelegators` getter.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The pool staking address.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_delegator&lt;/code&gt; - The delegator&amp;#x27;s address.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_removePoolDelegatorInactive&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_removePoolDelegatorInactive&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_removePoolDelegatorInactive&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress, address _delegator) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Removes the specified address from the array of the inactive delegators of the specified pool. Used by the `_addPoolDelegator` and `_removePoolDelegator` internal functions.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The pool staking address.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_delegator&lt;/code&gt; - The delegator&amp;#x27;s address.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_removePoolInactive&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_removePoolInactive&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_removePoolInactive&lt;/strong&gt;&lt;span&gt;(address _stakingAddress) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Removes the specified staking address from the array of inactive pools returned by the `getPoolsInactive` getter. Used by withdrawal functions, by the `_addPoolActive` and `_removePool` internal functions.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_stakingAddress&lt;/code&gt; - The pool removed from the array of inactive pools.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_sendWithdrawnStakeAmount&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_sendWithdrawnStakeAmount&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;&lt;span&gt;abstract &lt;/span&gt;function &lt;strong&gt;_sendWithdrawnStakeAmount&lt;/strong&gt;&lt;span&gt;(address _to, uint256 _amount) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_to&lt;/code&gt; - address&lt;/div&gt;&lt;div&gt;&lt;code&gt;_amount&lt;/code&gt; - uint256&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_setLikelihood&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_setLikelihood&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_setLikelihood&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Calculates (updates) the probability of being selected as a validator for the specified pool and updates the total sum of probability coefficients. Actually, the probability is equal to the amount totally staked into the pool. See the `getPoolsLikelihood` getter. Used by the staking and withdrawal functions.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The address of the pool for which the probability coefficient must be updated.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_snapshotDelegatorStake&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_snapshotDelegatorStake&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_snapshotDelegatorStake&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress, address _delegator) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Makes a snapshot of the amount currently staked by the specified delegator into the specified pool (staking address). Used by the `orderWithdraw`, `_stake`, and `_withdraw` functions.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The staking address of the pool.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_delegator&lt;/code&gt; - The address of the delegator.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_stake&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_stake&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;&lt;span&gt;abstract &lt;/span&gt;function &lt;strong&gt;_stake&lt;/strong&gt;&lt;span&gt;(address _toPoolStakingAddress, uint256 _amount) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_toPoolStakingAddress&lt;/code&gt; - address&lt;/div&gt;&lt;div&gt;&lt;code&gt;_amount&lt;/code&gt; - uint256&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_stake&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_stake&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_stake&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress, address _staker, uint256 _amount) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;The internal function used by the `_stake` and `moveStake` functions. See the `stake` public function for more details.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The staking address of the pool where the tokens/coins should be staked.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_staker&lt;/code&gt; - The staker&amp;#x27;s address.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_amount&lt;/code&gt; - The amount of tokens/coins to be staked.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_thisBalance&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_thisBalance&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;&lt;span&gt;abstract &lt;/span&gt;function &lt;strong&gt;_thisBalance&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (uint256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns the balance of this contract in staking tokens or coins depending on implementation.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;uint256&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_withdraw&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_withdraw&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_withdraw&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress, address _staker, uint256 _amount) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;The internal function used by the `withdraw` and `moveStake` functions. See the `withdraw` public function for more details.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The staking address of the pool from which the tokens/coins should be withdrawn.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_staker&lt;/code&gt; - The staker&amp;#x27;s address.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_amount&lt;/code&gt; - The amount of the tokens/coins to be withdrawn.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_withdrawCheckPool&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_withdrawCheckPool&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_withdrawCheckPool&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress, address _staker) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;The internal function used by the `_withdraw` and `claimOrderedWithdraw` functions. Contains a common logic for these functions.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The staking address of the pool from which the tokens/coins are withdrawn.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_staker&lt;/code&gt; - The staker&amp;#x27;s address.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;addPool&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;addPool&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;addPool&lt;/strong&gt;&lt;span&gt;(uint256 _amount, address _miningAddress) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;span&gt;payable &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Adds a new candidate&amp;#x27;s pool to the list of active pools (see the `getPools` getter) and moves the specified amount of staking tokens/coins from the candidate&amp;#x27;s staking address to the candidate&amp;#x27;s pool. A participant calls this function using their staking address when they want to create a pool. This is a wrapper for the `stake` function.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_amount&lt;/code&gt; - The amount of tokens to be staked. Ignored when staking in native coins because `msg.value` is used in that case.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_miningAddress&lt;/code&gt; - The mining address of the candidate. The mining address is bound to the staking address (msg.sender). This address cannot be equal to `msg.sender`.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;areStakeAndWithdrawAllowed&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;areStakeAndWithdrawAllowed&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;areStakeAndWithdrawAllowed&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (bool) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Determines whether staking/withdrawal operations are allowed at the moment. Used by all staking/withdrawal functions.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;bool&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;claimOrderedWithdraw&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;claimOrderedWithdraw&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;claimOrderedWithdraw&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Withdraws the staking tokens/coins from the specified pool ordered during the previous staking epochs with the `orderWithdraw` function. The ordered amount can be retrieved by the `orderedWithdrawAmount` getter.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-modifiers&quot;&gt;Modifiers:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;a href=&quot;base_StakingAuRaBase.html#gasPriceIsValid&quot;&gt;gasPriceIsValid &lt;/a&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyInitialized&quot;&gt;onlyInitialized &lt;/a&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The staking address of the pool from which the ordered tokens/coins are withdrawn.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;clearUnremovableValidator&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;clearUnremovableValidator&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;clearUnremovableValidator&lt;/strong&gt;&lt;span&gt;(address _unremovableStakingAddress) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Adds the `unremovable validator` to either the `poolsToBeElected` or the `poolsToBeRemoved` array depending on their own stake in their own pool when they become removable. This allows the `ValidatorSetAuRa.newValidatorSet` function to recognize the unremovable validator as a regular removable pool. Called by the `ValidatorSet.clearUnremovableValidator` function.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-modifiers&quot;&gt;Modifiers:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyValidatorSetContract&quot;&gt;onlyValidatorSetContract &lt;/a&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_unremovableStakingAddress&lt;/code&gt; - The staking address of the unremovable validator.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;fallback&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;fallback&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;span&gt;payable &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Fallback function. Prevents direct sending native coins to this contract.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;getPools&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;getPools&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;getPools&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (address[]) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns an array of the current active pools (the staking addresses of candidates and validators). The size of the array cannot exceed MAX_CANDIDATES. A pool can be added to this array with the `_addPoolActive` internal function which is called by the `stake` or `orderWithdraw` function. A pool is considered active if its address has at least the minimum stake and this stake is not ordered to be withdrawn.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;address[]&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;getPoolsInactive&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;getPoolsInactive&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;getPoolsInactive&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (address[]) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns an array of the current inactive pools (the staking addresses of former candidates). A pool can be added to this array with the `_addPoolInactive` internal function which is called by `_removePool`. A pool is considered inactive if it is banned for some reason, if its address has zero stake, or if its entire stake is ordered to be withdrawn.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;address[]&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;getPoolsLikelihood&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;getPoolsLikelihood&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;getPoolsLikelihood&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (uint256[], uint256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns the array of stake amounts for each corresponding address in the `poolsToBeElected` array (see the `getPoolsToBeElected` getter) and a sum of these amounts. Used by the `ValidatorSetAuRa.newValidatorSet` function when randomly selecting new validators at the last block of a staking epoch. An array value is updated every time any staked amount is changed in this pool (see the `_setLikelihood` internal function).&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;`uint256[] likelihoods` - The array of the coefficients. The array length is always equal to the length of the `poolsToBeElected` array. `uint256 sum` - The total sum of the amounts.&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;getPoolsToBeElected&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;getPoolsToBeElected&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;getPoolsToBeElected&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (address[]) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns the list of pools (their staking addresses) which will participate in a new validator set selection process in the `ValidatorSetAuRa.newValidatorSet` function. This is an array of pools which will be considered as candidates when forming a new validator set (at the last block of a staking epoch). This array is kept updated by the `_addPoolToBeElected` and `_deletePoolToBeElected` internal functions.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;address[]&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;getPoolsToBeRemoved&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;getPoolsToBeRemoved&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;getPoolsToBeRemoved&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (address[]) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns the list of pools (their staking addresses) which will be removed by the `ValidatorSetAuRa.newValidatorSet` function from the active `pools` array (at the last block of a staking epoch). This array is kept updated by the `_addPoolToBeRemoved` and `_deletePoolToBeRemoved` internal functions. A pool is added to this array when the pool&amp;#x27;s address withdraws (or orders) all of its own staking tokens from the pool, inactivating the pool.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;address[]&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;getStakerPools&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;getStakerPools&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;getStakerPools&lt;/strong&gt;&lt;span&gt;(address _staker, uint256 _offset, uint256 _length) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (address[]) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns the list of pools (staking addresses) into which the specified staker have ever staked.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_staker&lt;/code&gt; - The staker address (it can be a delegator or a pool staking address itself).&lt;/div&gt;&lt;div&gt;&lt;code&gt;_offset&lt;/code&gt; - The index in the array at which the reading should start. Ignored if the `_length` is 0.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_length&lt;/code&gt; - The max number of items to return.&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;address[]&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;getStakerPoolsLength&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;getStakerPoolsLength&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;getStakerPoolsLength&lt;/strong&gt;&lt;span&gt;(address _staker) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (uint256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns the length of the list of pools into which the specified staker have ever staked.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_staker&lt;/code&gt; - The staker address (it can be a delegator or a pool staking address itself).&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;uint256&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;incrementStakingEpoch&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;incrementStakingEpoch&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;incrementStakingEpoch&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Increments the serial number of the current staking epoch. Called by the `ValidatorSetAuRa.newValidatorSet` at the last block of the finished staking epoch.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-modifiers&quot;&gt;Modifiers:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyValidatorSetContract&quot;&gt;onlyValidatorSetContract &lt;/a&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;initialValidatorStake&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;initialValidatorStake&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;initialValidatorStake&lt;/strong&gt;&lt;span&gt;(uint256 _totalAmount) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Makes initial validator stakes. Can only be called by the owner before the network starts (after `initialize` is called but before `stakingEpochStartBlock`). Cannot be called more than once and cannot be called when starting from genesis. Requires `StakingAuRa` contract balance to be equal to the `_totalAmount`.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-modifiers&quot;&gt;Modifiers:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;a href=&quot;upgradeability_UpgradeableOwned.html#onlyOwner&quot;&gt;onlyOwner &lt;/a&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_totalAmount&lt;/code&gt; - The initial validator total stake amount (for all initial validators).&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;initialize&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;initialize&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;initialize&lt;/strong&gt;&lt;span&gt;(address _validatorSetContract, address[] _initialStakingAddresses, uint256 _delegatorMinStake, uint256 _candidateMinStake, uint256 _stakingEpochDuration, uint256 _stakingEpochStartBlock, uint256 _stakeWithdrawDisallowPeriod) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Initializes the network parameters. Can only be called by the constructor of the `InitializerAuRa` contract or owner.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_validatorSetContract&lt;/code&gt; - The address of the `ValidatorSetAuRa` contract.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_initialStakingAddresses&lt;/code&gt; - The array of initial validators&amp;#x27; staking addresses.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_delegatorMinStake&lt;/code&gt; - The minimum allowed amount of delegator stake in Wei.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_candidateMinStake&lt;/code&gt; - The minimum allowed amount of candidate/validator stake in Wei.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_stakingEpochDuration&lt;/code&gt; - The duration of a staking epoch in blocks (e.g., 120954 = 1 week for 5-seconds blocks in AuRa).&lt;/div&gt;&lt;div&gt;&lt;code&gt;_stakingEpochStartBlock&lt;/code&gt; - The number of the first block of initial staking epoch (must be zero if the network is starting from genesis block).&lt;/div&gt;&lt;div&gt;&lt;code&gt;_stakeWithdrawDisallowPeriod&lt;/code&gt; - The duration period (in blocks) at the end of a staking epoch during which participants cannot stake/withdraw/order/claim their staking tokens/coins (e.g., 4320 = 6 hours for 5-seconds blocks in AuRa).&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;isInitialized&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;isInitialized&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;isInitialized&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (bool) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns a boolean flag indicating if the `initialize` function has been called.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;bool&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;isPoolActive&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;isPoolActive&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;isPoolActive&lt;/strong&gt;&lt;span&gt;(address _stakingAddress) &lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (bool) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns a flag indicating whether a specified address is in the `pools` array. See the `getPools` getter.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_stakingAddress&lt;/code&gt; - The staking address of the pool.&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;bool&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;maxWithdrawAllowed&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;maxWithdrawAllowed&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;maxWithdrawAllowed&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress, address _staker) &lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (uint256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns the maximum amount which can be withdrawn from the specified pool by the specified staker at the moment. Used by the `withdraw` and `moveStake` functions.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The pool staking address from which the withdrawal will be made.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_staker&lt;/code&gt; - The staker address that is going to withdraw.&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;uint256&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;maxWithdrawOrderAllowed&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;maxWithdrawOrderAllowed&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;maxWithdrawOrderAllowed&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress, address _staker) &lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (uint256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns the maximum amount which can be ordered to be withdrawn from the specified pool by the specified staker at the moment. Used by the `orderWithdraw` function.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The pool staking address from which the withdrawal will be ordered.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_staker&lt;/code&gt; - The staker address that is going to order the withdrawal.&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;uint256&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;moveStake&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;moveStake&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;moveStake&lt;/strong&gt;&lt;span&gt;(address _fromPoolStakingAddress, address _toPoolStakingAddress, uint256 _amount) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Moves staking tokens/coins from one pool to another. A staker calls this function when they want to move their tokens/coins from one pool to another without withdrawing their tokens/coins.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-modifiers&quot;&gt;Modifiers:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;a href=&quot;base_StakingAuRaBase.html#gasPriceIsValid&quot;&gt;gasPriceIsValid &lt;/a&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyInitialized&quot;&gt;onlyInitialized &lt;/a&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_fromPoolStakingAddress&lt;/code&gt; - The staking address of the source pool.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_toPoolStakingAddress&lt;/code&gt; - The staking address of the target pool.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_amount&lt;/code&gt; - The amount of staking tokens/coins to be moved. The amount cannot exceed the value returned by the `maxWithdrawAllowed` getter.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;onTokenTransfer&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;onTokenTransfer&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;onTokenTransfer&lt;/strong&gt;&lt;span&gt;(address , uint256 , bytes ) &lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;pure &lt;/span&gt;&lt;span&gt;returns  (bool) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Prevents sending tokens directly to the `StakingAuRa` contract address by the `ERC677BridgeTokenRewardable.transferAndCall` function.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;&lt;/code&gt; - address&lt;/div&gt;&lt;div&gt;&lt;code&gt;&lt;/code&gt; - uint256&lt;/div&gt;&lt;div&gt;&lt;code&gt;&lt;/code&gt; - bytes&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;bool&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;orderWithdraw&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;orderWithdraw&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;orderWithdraw&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress, int256 _amount) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Orders tokens/coins withdrawal from the staking address of the specified pool to the staker&amp;#x27;s address. The requested tokens/coins can be claimed after the current staking epoch is complete using the `claimOrderedWithdraw` function.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-modifiers&quot;&gt;Modifiers:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;a href=&quot;base_StakingAuRaBase.html#gasPriceIsValid&quot;&gt;gasPriceIsValid &lt;/a&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyInitialized&quot;&gt;onlyInitialized &lt;/a&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The staking address of the pool from which the amount will be withdrawn.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_amount&lt;/code&gt; - The amount to be withdrawn. A positive value means the staker wants to either set or increase their withdrawal amount. A negative value means the staker wants to decrease a withdrawal amount that was previously set. The amount cannot exceed the value returned by the `maxWithdrawOrderAllowed` getter.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;poolDelegators&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;poolDelegators&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;poolDelegators&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress) &lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (address[]) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns an array of the current active delegators of the specified pool. A delegator is considered active if they have staked into the specified pool and their stake is not ordered to be withdrawn.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The pool staking address.&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;address[]&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;poolDelegatorsInactive&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;poolDelegatorsInactive&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;poolDelegatorsInactive&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress) &lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (address[]) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns an array of the current inactive delegators of the specified pool. A delegator is considered inactive if their entire stake is ordered to be withdrawn but not yet claimed.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The pool staking address.&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;address[]&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;removeMyPool&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;removeMyPool&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;removeMyPool&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Removes the candidate&amp;#x27;s or validator&amp;#x27;s pool from the `pools` array (a list of active pools which can be retrieved by the `getPools` getter). When a candidate or validator wants to remove their pool, they should call this function from their staking address. A validator cannot remove their pool while they are an `unremovable validator`.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-modifiers&quot;&gt;Modifiers:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;a href=&quot;base_StakingAuRaBase.html#gasPriceIsValid&quot;&gt;gasPriceIsValid &lt;/a&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyInitialized&quot;&gt;onlyInitialized &lt;/a&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;removePool&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;removePool&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;removePool&lt;/strong&gt;&lt;span&gt;(address _stakingAddress) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Removes a specified pool from the `pools` array (a list of active pools which can be retrieved by the `getPools` getter). Called by the `ValidatorSetAuRa._removeMaliciousValidator` internal function when a pool must be removed by the algorithm.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-modifiers&quot;&gt;Modifiers:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyValidatorSetContract&quot;&gt;onlyValidatorSetContract &lt;/a&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_stakingAddress&lt;/code&gt; - The staking address of the pool to be removed.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;removePools&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;removePools&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;removePools&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Removes pools which are in the `_poolsToBeRemoved` internal array from the `pools` array. Called by the `ValidatorSetAuRa.newValidatorSet` function when a pool must be removed by the algorithm.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-modifiers&quot;&gt;Modifiers:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyValidatorSetContract&quot;&gt;onlyValidatorSetContract &lt;/a&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;setCandidateMinStake&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;setCandidateMinStake&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;setCandidateMinStake&lt;/strong&gt;&lt;span&gt;(uint256 _minStake) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Sets (updates) the limit of the minimum candidate stake (CANDIDATE_MIN_STAKE). Can only be called by the `owner`.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-modifiers&quot;&gt;Modifiers:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;a href=&quot;upgradeability_UpgradeableOwned.html#onlyOwner&quot;&gt;onlyOwner &lt;/a&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyInitialized&quot;&gt;onlyInitialized &lt;/a&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_minStake&lt;/code&gt; - The value of a new limit in Wei.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;setDelegatorMinStake&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;setDelegatorMinStake&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;setDelegatorMinStake&lt;/strong&gt;&lt;span&gt;(uint256 _minStake) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Sets (updates) the limit of the minimum delegator stake (DELEGATOR_MIN_STAKE). Can only be called by the `owner`.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-modifiers&quot;&gt;Modifiers:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;a href=&quot;upgradeability_UpgradeableOwned.html#onlyOwner&quot;&gt;onlyOwner &lt;/a&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyInitialized&quot;&gt;onlyInitialized &lt;/a&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_minStake&lt;/code&gt; - The value of a new limit in Wei.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;setStakingEpochStartBlock&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;setStakingEpochStartBlock&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;setStakingEpochStartBlock&lt;/strong&gt;&lt;span&gt;(uint256 _blockNumber) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Sets the number of the first block in the upcoming staking epoch. Called by the `ValidatorSetAuRa.newValidatorSet` function at the last block of a staking epoch.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-modifiers&quot;&gt;Modifiers:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyValidatorSetContract&quot;&gt;onlyValidatorSetContract &lt;/a&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_blockNumber&lt;/code&gt; - The number of the very first block in the upcoming staking epoch.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;stake&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;stake&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;stake&lt;/strong&gt;&lt;span&gt;(address _toPoolStakingAddress, uint256 _amount) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;span&gt;payable &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Moves the specified amount of staking tokens/coins from the staker&amp;#x27;s address to the staking address of the specified pool. Actually, the amount is stored in a balance of this StakingAuRa contract. A staker calls this function when they want to make a stake into a pool.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_toPoolStakingAddress&lt;/code&gt; - The staking address of the pool where the tokens should be staked.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_amount&lt;/code&gt; - The amount of tokens to be staked. Ignored when staking in native coins because `msg.value` is used instead.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;stakeAmountByCurrentEpoch&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;stakeAmountByCurrentEpoch&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;stakeAmountByCurrentEpoch&lt;/strong&gt;&lt;span&gt;(address _poolStakingAddress, address _staker) &lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (uint256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns the amount of staking tokens/coins staked into the specified pool by the specified staker during the current staking epoch (see the `stakingEpoch` getter). Used by the `stake`, `withdraw`, and `orderWithdraw` functions.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_poolStakingAddress&lt;/code&gt; - The pool staking address.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_staker&lt;/code&gt; - The staker&amp;#x27;s address.&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;uint256&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;stakingEpochEndBlock&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;stakingEpochEndBlock&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;stakingEpochEndBlock&lt;/strong&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (uint256) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns the number of the last block of the current staking epoch.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;uint256&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;withdraw&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;withdraw&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;withdraw&lt;/strong&gt;&lt;span&gt;(address _fromPoolStakingAddress, uint256 _amount) &lt;/span&gt;&lt;span&gt;external &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Moves the specified amount of staking tokens/coins from the staking address of the specified pool to the staker&amp;#x27;s address. A staker calls this function when they want to withdraw their tokens/coins.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-modifiers&quot;&gt;Modifiers:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;a href=&quot;base_StakingAuRaBase.html#gasPriceIsValid&quot;&gt;gasPriceIsValid &lt;/a&gt;&lt;a href=&quot;base_StakingAuRaBase.html#onlyInitialized&quot;&gt;onlyInitialized &lt;/a&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_fromPoolStakingAddress&lt;/code&gt; - The staking address of the pool from which the tokens/coins should be withdrawn.&lt;/div&gt;&lt;div&gt;&lt;code&gt;_amount&lt;/code&gt; - The amount of tokens/coins to be withdrawn. The amount cannot exceed the value returned by the `maxWithdrawAllowed` getter.&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/posdao-contracts/undefined"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="stylesheet" href="/posdao-contracts/css/main.css"/><script src="/posdao-contracts/js/codetabs.js"></script></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/posdao-contracts/"><h2 class="headerTitle">POSDAO Smart Contracts Docs</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"></ul></nav></div></header></div></div><div class="navPusher singleRowMobileNav"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>âº</i><span>base</span></h2></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">base</h3><ul class=""><li class="navListItem"><a class="navItem" href="/posdao-contracts/docs/base_BlockRewardAuRaBase.html">BlockRewardAuRaBase</a></li><li class="navListItem"><a class="navItem" href="/posdao-contracts/docs/base_BlockRewardAuRaCoins.html">BlockRewardAuRaCoins</a></li><li class="navListItem"><a class="navItem" href="/posdao-contracts/docs/base_BlockRewardAuRaTokens.html">BlockRewardAuRaTokens</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/posdao-contracts/docs/base_StakingAuRaBase.html">StakingAuRaBase</a></li><li class="navListItem"><a class="navItem" href="/posdao-contracts/docs/base_StakingAuRaCoins.html">StakingAuRaCoins</a></li><li class="navListItem"><a class="navItem" href="/posdao-contracts/docs/base_StakingAuRaTokens.html">StakingAuRaTokens</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">upgradeability</h3><ul class=""><li class="navListItem"><a class="navItem" href="/posdao-contracts/docs/upgradeability_AdminUpgradeabilityProxy.html">AdminUpgradeabilityProxy</a></li><li class="navListItem"><a class="navItem" href="/posdao-contracts/docs/upgradeability_BaseAdminUpgradeabilityProxy.html">BaseAdminUpgradeabilityProxy</a></li><li class="navListItem"><a class="navItem" href="/posdao-contracts/docs/upgradeability_BaseUpgradeabilityProxy.html">BaseUpgradeabilityProxy</a></li><li class="navListItem"><a class="navItem" href="/posdao-contracts/docs/upgradeability_Proxy.html">Proxy</a></li><li class="navListItem"><a class="navItem" href="/posdao-contracts/docs/upgradeability_UpgradeabilityAdmin.html">UpgradeabilityAdmin</a></li><li class="navListItem"><a class="navItem" href="/posdao-contracts/docs/upgradeability_UpgradeabilityProxy.html">UpgradeabilityProxy</a></li><li class="navListItem"><a class="navItem" href="/posdao-contracts/docs/upgradeability_UpgradeableOwned.html">UpgradeableOwned</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">root</h3><ul class=""><li class="navListItem"><a class="navItem" href="/posdao-contracts/docs/BlockRewardAuRa.html">BlockRewardAuRa</a></li><li class="navListItem"><a class="navItem" href="/posdao-contracts/docs/Certifier.html">Certifier</a></li><li class="navListItem"><a class="navItem" href="/posdao-contracts/docs/InitializerAuRa.html">InitializerAuRa</a></li><li class="navListItem"><a class="navItem" href="/posdao-contracts/docs/RandomAuRa.html">RandomAuRa</a></li><li class="navListItem"><a class="navItem" href="/posdao-contracts/docs/Registry.html">Registry</a></li><li class="navListItem"><a class="navItem" href="/posdao-contracts/docs/StakingAuRa.html">StakingAuRa</a></li><li class="navListItem"><a class="navItem" href="/posdao-contracts/docs/TxPermission.html">TxPermission</a></li><li class="navListItem"><a class="navItem" href="/posdao-contracts/docs/ValidatorSetAuRa.html">ValidatorSetAuRa</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle"> </h3><ul class=""><li class="navListItem"><a class="navItem" href="/posdao-contracts/docs/index.html">POSDAO Smart Contracts Docs</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">StakingAuRaBase</h1></header><article><div><span><div class="contract-doc"><div class="contract"><h2 class="contract-header"><span class="contract-kind">contract</span> StakingAuRaBase</h2><p class="base-contracts"><span>is</span> <a href="upgradeability_UpgradeableOwned.html">UpgradeableOwned</a><span>, </span><a href="interfaces_IStakingAuRa.html">IStakingAuRa</a></p><p class="description">Implements staking and withdrawal logic.</p><div class="source">Source: <a href="https://github.com/poanetwork/posdao-contracts/blob/v0.1.5/contracts/base/StakingAuRaBase.sol" target="_blank">contracts/base/StakingAuRaBase.sol</a></div></div><div class="index"><h2>Index</h2><ul><li><a href="base_StakingAuRaBase.html#AddedPool">AddedPool</a></li><li><a href="base_StakingAuRaBase.html#ClaimedOrderedWithdrawal">ClaimedOrderedWithdrawal</a></li><li><a href="base_StakingAuRaBase.html#MovedStake">MovedStake</a></li><li><a href="base_StakingAuRaBase.html#OrderedWithdrawal">OrderedWithdrawal</a></li><li><a href="base_StakingAuRaBase.html#PlacedStake">PlacedStake</a></li><li><a href="base_StakingAuRaBase.html#RemovedPool">RemovedPool</a></li><li><a href="base_StakingAuRaBase.html#WithdrewStake">WithdrewStake</a></li><li><a href="base_StakingAuRaBase.html#_addPoolActive">_addPoolActive</a></li><li><a href="base_StakingAuRaBase.html#_addPoolDelegator">_addPoolDelegator</a></li><li><a href="base_StakingAuRaBase.html#_addPoolDelegatorInactive">_addPoolDelegatorInactive</a></li><li><a href="base_StakingAuRaBase.html#_addPoolInactive">_addPoolInactive</a></li><li><a href="base_StakingAuRaBase.html#_addPoolToBeElected">_addPoolToBeElected</a></li><li><a href="base_StakingAuRaBase.html#_addPoolToBeRemoved">_addPoolToBeRemoved</a></li><li><a href="base_StakingAuRaBase.html#_deletePoolToBeElected">_deletePoolToBeElected</a></li><li><a href="base_StakingAuRaBase.html#_deletePoolToBeRemoved">_deletePoolToBeRemoved</a></li><li><a href="base_StakingAuRaBase.html#_getCurrentBlockNumber">_getCurrentBlockNumber</a></li><li><a href="base_StakingAuRaBase.html#_getDelegatorStake">_getDelegatorStake</a></li><li><a href="base_StakingAuRaBase.html#_getMaxCandidates">_getMaxCandidates</a></li><li><a href="base_StakingAuRaBase.html#_isPoolEmpty">_isPoolEmpty</a></li><li><a href="base_StakingAuRaBase.html#_isPoolToBeElected">_isPoolToBeElected</a></li><li><a href="base_StakingAuRaBase.html#_isWithdrawAllowed">_isWithdrawAllowed</a></li><li><a href="base_StakingAuRaBase.html#_removePool">_removePool</a></li><li><a href="base_StakingAuRaBase.html#_removePoolDelegator">_removePoolDelegator</a></li><li><a href="base_StakingAuRaBase.html#_removePoolDelegatorInactive">_removePoolDelegatorInactive</a></li><li><a href="base_StakingAuRaBase.html#_removePoolInactive">_removePoolInactive</a></li><li><a href="base_StakingAuRaBase.html#_sendWithdrawnStakeAmount">_sendWithdrawnStakeAmount</a></li><li><a href="base_StakingAuRaBase.html#_setLikelihood">_setLikelihood</a></li><li><a href="base_StakingAuRaBase.html#_snapshotDelegatorStake">_snapshotDelegatorStake</a></li><li><a href="base_StakingAuRaBase.html#_stake">_stake</a></li><li><a href="base_StakingAuRaBase.html#_stake">_stake</a></li><li><a href="base_StakingAuRaBase.html#_thisBalance">_thisBalance</a></li><li><a href="base_StakingAuRaBase.html#_withdraw">_withdraw</a></li><li><a href="base_StakingAuRaBase.html#_withdrawCheckPool">_withdrawCheckPool</a></li><li><a href="base_StakingAuRaBase.html#addPool">addPool</a></li><li><a href="base_StakingAuRaBase.html#areStakeAndWithdrawAllowed">areStakeAndWithdrawAllowed</a></li><li><a href="base_StakingAuRaBase.html#claimOrderedWithdraw">claimOrderedWithdraw</a></li><li><a href="base_StakingAuRaBase.html#clearUnremovableValidator">clearUnremovableValidator</a></li><li><a href="base_StakingAuRaBase.html#">fallback</a></li><li><a href="base_StakingAuRaBase.html#gasPriceIsValid">gasPriceIsValid</a></li><li><a href="base_StakingAuRaBase.html#getPools">getPools</a></li><li><a href="base_StakingAuRaBase.html#getPoolsInactive">getPoolsInactive</a></li><li><a href="base_StakingAuRaBase.html#getPoolsLikelihood">getPoolsLikelihood</a></li><li><a href="base_StakingAuRaBase.html#getPoolsToBeElected">getPoolsToBeElected</a></li><li><a href="base_StakingAuRaBase.html#getPoolsToBeRemoved">getPoolsToBeRemoved</a></li><li><a href="base_StakingAuRaBase.html#getStakerPools">getStakerPools</a></li><li><a href="base_StakingAuRaBase.html#getStakerPoolsLength">getStakerPoolsLength</a></li><li><a href="base_StakingAuRaBase.html#incrementStakingEpoch">incrementStakingEpoch</a></li><li><a href="base_StakingAuRaBase.html#initialValidatorStake">initialValidatorStake</a></li><li><a href="base_StakingAuRaBase.html#initialize">initialize</a></li><li><a href="base_StakingAuRaBase.html#isInitialized">isInitialized</a></li><li><a href="base_StakingAuRaBase.html#isPoolActive">isPoolActive</a></li><li><a href="base_StakingAuRaBase.html#maxWithdrawAllowed">maxWithdrawAllowed</a></li><li><a href="base_StakingAuRaBase.html#maxWithdrawOrderAllowed">maxWithdrawOrderAllowed</a></li><li><a href="base_StakingAuRaBase.html#moveStake">moveStake</a></li><li><a href="base_StakingAuRaBase.html#onTokenTransfer">onTokenTransfer</a></li><li><a href="base_StakingAuRaBase.html#onlyBlockRewardContract">onlyBlockRewardContract</a></li><li><a href="base_StakingAuRaBase.html#onlyInitialized">onlyInitialized</a></li><li><a href="base_StakingAuRaBase.html#onlyValidatorSetContract">onlyValidatorSetContract</a></li><li><a href="base_StakingAuRaBase.html#orderWithdraw">orderWithdraw</a></li><li><a href="base_StakingAuRaBase.html#poolDelegators">poolDelegators</a></li><li><a href="base_StakingAuRaBase.html#poolDelegatorsInactive">poolDelegatorsInactive</a></li><li><a href="base_StakingAuRaBase.html#removeMyPool">removeMyPool</a></li><li><a href="base_StakingAuRaBase.html#removePool">removePool</a></li><li><a href="base_StakingAuRaBase.html#removePools">removePools</a></li><li><a href="base_StakingAuRaBase.html#setCandidateMinStake">setCandidateMinStake</a></li><li><a href="base_StakingAuRaBase.html#setDelegatorMinStake">setDelegatorMinStake</a></li><li><a href="base_StakingAuRaBase.html#setStakingEpochStartBlock">setStakingEpochStartBlock</a></li><li><a href="base_StakingAuRaBase.html#stake">stake</a></li><li><a href="base_StakingAuRaBase.html#stakeAmountByCurrentEpoch">stakeAmountByCurrentEpoch</a></li><li><a href="base_StakingAuRaBase.html#stakingEpochEndBlock">stakingEpochEndBlock</a></li><li><a href="base_StakingAuRaBase.html#withdraw">withdraw</a></li></ul></div><div class="reference"><h2>Reference</h2><div class="events"><h3>Events</h3><ul><li><div class="item event"><span id="AddedPool" class="anchor-marker"></span><h4 class="name">AddedPool</h4><div class="body"><code class="signature">event <strong>AddedPool</strong><span>(address poolStakingAddress) </span></code><hr/><div class="description"><p>Emitted by `_addPoolActive` internal function to signal that the specified staking address created a new pool.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>poolStakingAddress</code> - The staking address of newly added pool.</div></dd></dl></div></div></li><li><div class="item event"><span id="ClaimedOrderedWithdrawal" class="anchor-marker"></span><h4 class="name">ClaimedOrderedWithdrawal</h4><div class="body"><code class="signature">event <strong>ClaimedOrderedWithdrawal</strong><span>(address fromPoolStakingAddress, address staker, uint256 stakingEpoch, uint256 amount) </span></code><hr/><div class="description"><p>Emitted by the `claimOrderedWithdraw` function to signal the staker withdrew the specified amount of requested tokens/coins from the specified pool during the specified staking epoch.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>fromPoolStakingAddress</code> - The pool from which the `staker` withdrew the `amount`.</div><div><code>staker</code> - The address of the staker that withdrew the `amount`.</div><div><code>stakingEpoch</code> - The serial number of the staking epoch during which the claim was made.</div><div><code>amount</code> - The withdrawal amount.</div></dd></dl></div></div></li><li><div class="item event"><span id="MovedStake" class="anchor-marker"></span><h4 class="name">MovedStake</h4><div class="body"><code class="signature">event <strong>MovedStake</strong><span>(address fromPoolStakingAddress, address toPoolStakingAddress, address staker, uint256 stakingEpoch, uint256 amount) </span></code><hr/><div class="description"><p>Emitted by the `moveStake` function to signal the staker moved the specified amount of stake from one pool to another during the specified staking epoch.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>fromPoolStakingAddress</code> - The pool from which the `staker` moved the stake.</div><div><code>toPoolStakingAddress</code> - The destination pool where the `staker` moved the stake.</div><div><code>staker</code> - The address of the staker who moved the `amount`.</div><div><code>stakingEpoch</code> - The serial number of the staking epoch during which the `amount` was moved.</div><div><code>amount</code> - The stake amount which was moved.</div></dd></dl></div></div></li><li><div class="item event"><span id="OrderedWithdrawal" class="anchor-marker"></span><h4 class="name">OrderedWithdrawal</h4><div class="body"><code class="signature">event <strong>OrderedWithdrawal</strong><span>(address fromPoolStakingAddress, address staker, uint256 stakingEpoch, int256 amount) </span></code><hr/><div class="description"><p>Emitted by the `orderWithdraw` function to signal the staker ordered the withdrawal of the specified amount of their stake from the specified pool during the specified staking epoch.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>fromPoolStakingAddress</code> - The pool from which the `staker` ordered a withdrawal of the `amount`.</div><div><code>staker</code> - The address of the staker that ordered the withdrawal of the `amount`.</div><div><code>stakingEpoch</code> - The serial number of the staking epoch during which the order was made.</div><div><code>amount</code> - The ordered withdrawal amount. Can be either positive or negative. See the `orderWithdraw` function.</div></dd></dl></div></div></li><li><div class="item event"><span id="PlacedStake" class="anchor-marker"></span><h4 class="name">PlacedStake</h4><div class="body"><code class="signature">event <strong>PlacedStake</strong><span>(address toPoolStakingAddress, address staker, uint256 stakingEpoch, uint256 amount) </span></code><hr/><div class="description"><p>Emitted by the `stake` function to signal the staker placed a stake of the specified amount for the specified pool during the specified staking epoch.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>toPoolStakingAddress</code> - The pool in which the `staker` placed the stake.</div><div><code>staker</code> - The address of the staker that placed the stake.</div><div><code>stakingEpoch</code> - The serial number of the staking epoch during which the stake was made.</div><div><code>amount</code> - The stake amount.</div></dd></dl></div></div></li><li><div class="item event"><span id="RemovedPool" class="anchor-marker"></span><h4 class="name">RemovedPool</h4><div class="body"><code class="signature">event <strong>RemovedPool</strong><span>(address poolStakingAddress) </span></code><hr/><div class="description"><p>Emitted by `_removePool` internal function to signal that a pool with the specified staking address was removed.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>poolStakingAddress</code> - The staking address of removed pool.</div></dd></dl></div></div></li><li><div class="item event"><span id="WithdrewStake" class="anchor-marker"></span><h4 class="name">WithdrewStake</h4><div class="body"><code class="signature">event <strong>WithdrewStake</strong><span>(address fromPoolStakingAddress, address staker, uint256 stakingEpoch, uint256 amount) </span></code><hr/><div class="description"><p>Emitted by the `withdraw` function to signal the staker withdrew the specified amount of a stake from the specified pool during the specified staking epoch.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>fromPoolStakingAddress</code> - The pool from which the `staker` withdrew the `amount`.</div><div><code>staker</code> - The address of staker that withdrew the `amount`.</div><div><code>stakingEpoch</code> - The serial number of the staking epoch during which the withdrawal was made.</div><div><code>amount</code> - The withdrawal amount.</div></dd></dl></div></div></li></ul></div><div class="modifiers"><h3>Modifiers</h3><ul><li><div class="item modifier"><span id="gasPriceIsValid" class="anchor-marker"></span><h4 class="name">gasPriceIsValid</h4><div class="body"><code class="signature">modifier <strong>gasPriceIsValid</strong><span>() </span></code><hr/><div class="description"><p>Ensures the transaction gas price is not zero.</p></div></div></div></li><li><div class="item modifier"><span id="onlyBlockRewardContract" class="anchor-marker"></span><h4 class="name">onlyBlockRewardContract</h4><div class="body"><code class="signature">modifier <strong>onlyBlockRewardContract</strong><span>() </span></code><hr/><div class="description"><p>Ensures the caller is the BlockRewardAuRa contract address.</p></div></div></div></li><li><div class="item modifier"><span id="onlyInitialized" class="anchor-marker"></span><h4 class="name">onlyInitialized</h4><div class="body"><code class="signature">modifier <strong>onlyInitialized</strong><span>() </span></code><hr/><div class="description"><p>Ensures the `initialize` function was called before.</p></div></div></div></li><li><div class="item modifier"><span id="onlyValidatorSetContract" class="anchor-marker"></span><h4 class="name">onlyValidatorSetContract</h4><div class="body"><code class="signature">modifier <strong>onlyValidatorSetContract</strong><span>() </span></code><hr/><div class="description"><p>Ensures the caller is the ValidatorSetAuRa contract address.</p></div></div></div></li></ul></div><div class="functions"><h3>Functions</h3><ul><li><div class="item function"><span id="_addPoolActive" class="anchor-marker"></span><h4 class="name">_addPoolActive</h4><div class="body"><code class="signature">function <strong>_addPoolActive</strong><span>(address _stakingAddress, bool _toBeElected) </span><span>internal </span></code><hr/><div class="description"><p>Adds the specified staking address to the array of active pools returned by the `getPools` getter. Used by the `stake`, `addPool`, and `orderWithdraw` functions.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_stakingAddress</code> - The pool added to the array of active pools.</div><div><code>_toBeElected</code> - The boolean flag which defines whether the specified address should be added simultaneously to the `poolsToBeElected` array. See the `getPoolsToBeElected` getter.</div></dd></dl></div></div></li><li><div class="item function"><span id="_addPoolDelegator" class="anchor-marker"></span><h4 class="name">_addPoolDelegator</h4><div class="body"><code class="signature">function <strong>_addPoolDelegator</strong><span>(address _poolStakingAddress, address _delegator) </span><span>internal </span></code><hr/><div class="description"><p>Adds the specified address to the array of the current active delegators of the specified pool. Used by the `stake` and `orderWithdraw` functions. See the `poolDelegators` getter.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_poolStakingAddress</code> - The pool staking address.</div><div><code>_delegator</code> - The delegator&#x27;s address.</div></dd></dl></div></div></li><li><div class="item function"><span id="_addPoolDelegatorInactive" class="anchor-marker"></span><h4 class="name">_addPoolDelegatorInactive</h4><div class="body"><code class="signature">function <strong>_addPoolDelegatorInactive</strong><span>(address _poolStakingAddress, address _delegator) </span><span>internal </span></code><hr/><div class="description"><p>Adds the specified address to the array of the current inactive delegators of the specified pool. Used by the `_removePoolDelegator` internal function.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_poolStakingAddress</code> - The pool staking address.</div><div><code>_delegator</code> - The delegator&#x27;s address.</div></dd></dl></div></div></li><li><div class="item function"><span id="_addPoolInactive" class="anchor-marker"></span><h4 class="name">_addPoolInactive</h4><div class="body"><code class="signature">function <strong>_addPoolInactive</strong><span>(address _stakingAddress) </span><span>internal </span></code><hr/><div class="description"><p>Adds the specified staking address to the array of inactive pools returned by the `getPoolsInactive` getter. Used by the `_removePool` internal function.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_stakingAddress</code> - The pool added to the array of inactive pools.</div></dd></dl></div></div></li><li><div class="item function"><span id="_addPoolToBeElected" class="anchor-marker"></span><h4 class="name">_addPoolToBeElected</h4><div class="body"><code class="signature">function <strong>_addPoolToBeElected</strong><span>(address _stakingAddress) </span><span>internal </span></code><hr/><div class="description"><p>Adds the specified staking address to the array of pools returned by the `getPoolsToBeElected` getter. Used by the `_addPoolActive` internal function. See the `getPoolsToBeElected` getter.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_stakingAddress</code> - The pool added to the `poolsToBeElected` array.</div></dd></dl></div></div></li><li><div class="item function"><span id="_addPoolToBeRemoved" class="anchor-marker"></span><h4 class="name">_addPoolToBeRemoved</h4><div class="body"><code class="signature">function <strong>_addPoolToBeRemoved</strong><span>(address _stakingAddress) </span><span>internal </span></code><hr/><div class="description"><p>Adds the specified staking address to the array of pools returned by the `getPoolsToBeRemoved` getter. Used by withdrawal functions. See the `getPoolsToBeRemoved` getter.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_stakingAddress</code> - The pool added to the `poolsToBeRemoved` array.</div></dd></dl></div></div></li><li><div class="item function"><span id="_deletePoolToBeElected" class="anchor-marker"></span><h4 class="name">_deletePoolToBeElected</h4><div class="body"><code class="signature">function <strong>_deletePoolToBeElected</strong><span>(address _stakingAddress) </span><span>internal </span></code><hr/><div class="description"><p>Deletes the specified staking address from the array of pools returned by the `getPoolsToBeElected` getter. Used by the `_addPoolToBeRemoved` and `_removePool` internal functions. See the `getPoolsToBeElected` getter.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_stakingAddress</code> - The pool deleted from the `poolsToBeElected` array.</div></dd></dl></div></div></li><li><div class="item function"><span id="_deletePoolToBeRemoved" class="anchor-marker"></span><h4 class="name">_deletePoolToBeRemoved</h4><div class="body"><code class="signature">function <strong>_deletePoolToBeRemoved</strong><span>(address _stakingAddress) </span><span>internal </span></code><hr/><div class="description"><p>Deletes the specified staking address from the array of pools returned by the `getPoolsToBeRemoved` getter. Used by the `_addPoolToBeElected` and `_removePool` internal functions. See the `getPoolsToBeRemoved` getter.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_stakingAddress</code> - The pool deleted from the `poolsToBeRemoved` array.</div></dd></dl></div></div></li><li><div class="item function"><span id="_getCurrentBlockNumber" class="anchor-marker"></span><h4 class="name">_getCurrentBlockNumber</h4><div class="body"><code class="signature">function <strong>_getCurrentBlockNumber</strong><span>() </span><span>internal </span><span>view </span><span>returns  (uint256) </span></code><hr/><div class="description"><p>Returns the current block number. Needed mostly for unit tests.</p></div><dl><dt><span class="label-return">Returns:</span></dt><dd>uint256</dd></dl></div></div></li><li><div class="item function"><span id="_getDelegatorStake" class="anchor-marker"></span><h4 class="name">_getDelegatorStake</h4><div class="body"><code class="signature">function <strong>_getDelegatorStake</strong><span>(uint256 _epoch, uint256 _firstEpoch, uint256 _prevDelegatorStake, address _poolStakingAddress, address _delegator) </span><span>internal </span><span>view </span><span>returns  (uint256) </span></code><hr/><div class="description"><p>The internal function used by the `claimReward` function and `getRewardAmount` getter. Finds the stake amount made by a specified delegator into a specified pool before a specified staking epoch.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_epoch</code> - uint256</div><div><code>_firstEpoch</code> - uint256</div><div><code>_prevDelegatorStake</code> - uint256</div><div><code>_poolStakingAddress</code> - address</div><div><code>_delegator</code> - address</div></dd><dt><span class="label-return">Returns:</span></dt><dd>uint256</dd></dl></div></div></li><li><div class="item function"><span id="_getMaxCandidates" class="anchor-marker"></span><h4 class="name">_getMaxCandidates</h4><div class="body"><code class="signature">function <strong>_getMaxCandidates</strong><span>() </span><span>internal </span><span>pure </span><span>returns  (uint256) </span></code><hr/><div class="description"><p>Returns the max number of candidates (including validators). See the MAX_CANDIDATES constant. Needed mostly for unit tests.</p></div><dl><dt><span class="label-return">Returns:</span></dt><dd>uint256</dd></dl></div></div></li><li><div class="item function"><span id="_isPoolEmpty" class="anchor-marker"></span><h4 class="name">_isPoolEmpty</h4><div class="body"><code class="signature">function <strong>_isPoolEmpty</strong><span>(address _poolStakingAddress) </span><span>internal </span><span>view </span><span>returns  (bool) </span></code><hr/><div class="description"><p>Returns a boolean flag indicating whether the specified pool is fully empty (all stakes are withdrawn including ordered withdrawals).</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_poolStakingAddress</code> - The staking address of the pool</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bool</dd></dl></div></div></li><li><div class="item function"><span id="_isPoolToBeElected" class="anchor-marker"></span><h4 class="name">_isPoolToBeElected</h4><div class="body"><code class="signature">function <strong>_isPoolToBeElected</strong><span>(address _stakingAddress) </span><span>internal </span><span>view </span><span>returns  (bool, uint256) </span></code><hr/><div class="description"><p>Determines if the specified pool is in the `poolsToBeElected` array. See the `getPoolsToBeElected` getter. Used by the `_setLikelihood` internal function.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_stakingAddress</code> - The staking address of the pool.</div></dd><dt><span class="label-return">Returns:</span></dt><dd>`bool toBeElected` - The boolean flag indicating whether the `_stakingAddress` is in the `poolsToBeElected` array. `uint256 index` - The position of the item in the `poolsToBeElected` array if `toBeElected` is `true`.</dd></dl></div></div></li><li><div class="item function"><span id="_isWithdrawAllowed" class="anchor-marker"></span><h4 class="name">_isWithdrawAllowed</h4><div class="body"><code class="signature">function <strong>_isWithdrawAllowed</strong><span>(address _miningAddress, bool _isDelegator) </span><span>internal </span><span>view </span><span>returns  (bool) </span></code><hr/><div class="description"><p>Returns `true` if withdrawal from the pool of the specified candidate/validator is allowed at the moment. Used by all withdrawal functions.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_miningAddress</code> - The mining address of the validator&#x27;s pool.</div><div><code>_isDelegator</code> - Whether the withdrawal is requested by a delegator, not by a candidate/validator.</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bool</dd></dl></div></div></li><li><div class="item function"><span id="_removePool" class="anchor-marker"></span><h4 class="name">_removePool</h4><div class="body"><code class="signature">function <strong>_removePool</strong><span>(address _stakingAddress) </span><span>internal </span></code><hr/><div class="description"><p>Removes the specified staking address from the array of active pools returned by the `getPools` getter. Used by the `removePool`, `removeMyPool`, and withdrawal functions.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_stakingAddress</code> - The pool removed from the array of active pools.</div></dd></dl></div></div></li><li><div class="item function"><span id="_removePoolDelegator" class="anchor-marker"></span><h4 class="name">_removePoolDelegator</h4><div class="body"><code class="signature">function <strong>_removePoolDelegator</strong><span>(address _poolStakingAddress, address _delegator) </span><span>internal </span></code><hr/><div class="description"><p>Removes the specified address from the array of the current active delegators of the specified pool. Used by the withdrawal functions. See the `poolDelegators` getter.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_poolStakingAddress</code> - The pool staking address.</div><div><code>_delegator</code> - The delegator&#x27;s address.</div></dd></dl></div></div></li><li><div class="item function"><span id="_removePoolDelegatorInactive" class="anchor-marker"></span><h4 class="name">_removePoolDelegatorInactive</h4><div class="body"><code class="signature">function <strong>_removePoolDelegatorInactive</strong><span>(address _poolStakingAddress, address _delegator) </span><span>internal </span></code><hr/><div class="description"><p>Removes the specified address from the array of the inactive delegators of the specified pool. Used by the `_addPoolDelegator` and `_removePoolDelegator` internal functions.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_poolStakingAddress</code> - The pool staking address.</div><div><code>_delegator</code> - The delegator&#x27;s address.</div></dd></dl></div></div></li><li><div class="item function"><span id="_removePoolInactive" class="anchor-marker"></span><h4 class="name">_removePoolInactive</h4><div class="body"><code class="signature">function <strong>_removePoolInactive</strong><span>(address _stakingAddress) </span><span>internal </span></code><hr/><div class="description"><p>Removes the specified staking address from the array of inactive pools returned by the `getPoolsInactive` getter. Used by withdrawal functions, by the `_addPoolActive` and `_removePool` internal functions.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_stakingAddress</code> - The pool removed from the array of inactive pools.</div></dd></dl></div></div></li><li><div class="item function"><span id="_sendWithdrawnStakeAmount" class="anchor-marker"></span><h4 class="name">_sendWithdrawnStakeAmount</h4><div class="body"><code class="signature"><span>abstract </span>function <strong>_sendWithdrawnStakeAmount</strong><span>(address _to, uint256 _amount) </span><span>internal </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_to</code> - address</div><div><code>_amount</code> - uint256</div></dd></dl></div></div></li><li><div class="item function"><span id="_setLikelihood" class="anchor-marker"></span><h4 class="name">_setLikelihood</h4><div class="body"><code class="signature">function <strong>_setLikelihood</strong><span>(address _poolStakingAddress) </span><span>internal </span></code><hr/><div class="description"><p>Calculates (updates) the probability of being selected as a validator for the specified pool and updates the total sum of probability coefficients. Actually, the probability is equal to the amount totally staked into the pool. See the `getPoolsLikelihood` getter. Used by the staking and withdrawal functions.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_poolStakingAddress</code> - The address of the pool for which the probability coefficient must be updated.</div></dd></dl></div></div></li><li><div class="item function"><span id="_snapshotDelegatorStake" class="anchor-marker"></span><h4 class="name">_snapshotDelegatorStake</h4><div class="body"><code class="signature">function <strong>_snapshotDelegatorStake</strong><span>(address _poolStakingAddress, address _delegator) </span><span>internal </span></code><hr/><div class="description"><p>Makes a snapshot of the amount currently staked by the specified delegator into the specified pool (staking address). Used by the `orderWithdraw`, `_stake`, and `_withdraw` functions.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_poolStakingAddress</code> - The staking address of the pool.</div><div><code>_delegator</code> - The address of the delegator.</div></dd></dl></div></div></li><li><div class="item function"><span id="_stake" class="anchor-marker"></span><h4 class="name">_stake</h4><div class="body"><code class="signature"><span>abstract </span>function <strong>_stake</strong><span>(address _toPoolStakingAddress, uint256 _amount) </span><span>internal </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_toPoolStakingAddress</code> - address</div><div><code>_amount</code> - uint256</div></dd></dl></div></div></li><li><div class="item function"><span id="_stake" class="anchor-marker"></span><h4 class="name">_stake</h4><div class="body"><code class="signature">function <strong>_stake</strong><span>(address _poolStakingAddress, address _staker, uint256 _amount) </span><span>internal </span></code><hr/><div class="description"><p>The internal function used by the `_stake` and `moveStake` functions. See the `stake` public function for more details.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_poolStakingAddress</code> - The staking address of the pool where the tokens/coins should be staked.</div><div><code>_staker</code> - The staker&#x27;s address.</div><div><code>_amount</code> - The amount of tokens/coins to be staked.</div></dd></dl></div></div></li><li><div class="item function"><span id="_thisBalance" class="anchor-marker"></span><h4 class="name">_thisBalance</h4><div class="body"><code class="signature"><span>abstract </span>function <strong>_thisBalance</strong><span>() </span><span>internal </span><span>view </span><span>returns  (uint256) </span></code><hr/><div class="description"><p>Returns the balance of this contract in staking tokens or coins depending on implementation.</p></div><dl><dt><span class="label-return">Returns:</span></dt><dd>uint256</dd></dl></div></div></li><li><div class="item function"><span id="_withdraw" class="anchor-marker"></span><h4 class="name">_withdraw</h4><div class="body"><code class="signature">function <strong>_withdraw</strong><span>(address _poolStakingAddress, address _staker, uint256 _amount) </span><span>internal </span></code><hr/><div class="description"><p>The internal function used by the `withdraw` and `moveStake` functions. See the `withdraw` public function for more details.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_poolStakingAddress</code> - The staking address of the pool from which the tokens/coins should be withdrawn.</div><div><code>_staker</code> - The staker&#x27;s address.</div><div><code>_amount</code> - The amount of the tokens/coins to be withdrawn.</div></dd></dl></div></div></li><li><div class="item function"><span id="_withdrawCheckPool" class="anchor-marker"></span><h4 class="name">_withdrawCheckPool</h4><div class="body"><code class="signature">function <strong>_withdrawCheckPool</strong><span>(address _poolStakingAddress, address _staker) </span><span>internal </span></code><hr/><div class="description"><p>The internal function used by the `_withdraw` and `claimOrderedWithdraw` functions. Contains a common logic for these functions.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_poolStakingAddress</code> - The staking address of the pool from which the tokens/coins are withdrawn.</div><div><code>_staker</code> - The staker&#x27;s address.</div></dd></dl></div></div></li><li><div class="item function"><span id="addPool" class="anchor-marker"></span><h4 class="name">addPool</h4><div class="body"><code class="signature">function <strong>addPool</strong><span>(uint256 _amount, address _miningAddress) </span><span>external </span><span>payable </span></code><hr/><div class="description"><p>Adds a new candidate&#x27;s pool to the list of active pools (see the `getPools` getter) and moves the specified amount of staking tokens/coins from the candidate&#x27;s staking address to the candidate&#x27;s pool. A participant calls this function using their staking address when they want to create a pool. This is a wrapper for the `stake` function.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_amount</code> - The amount of tokens to be staked. Ignored when staking in native coins because `msg.value` is used in that case.</div><div><code>_miningAddress</code> - The mining address of the candidate. The mining address is bound to the staking address (msg.sender). This address cannot be equal to `msg.sender`.</div></dd></dl></div></div></li><li><div class="item function"><span id="areStakeAndWithdrawAllowed" class="anchor-marker"></span><h4 class="name">areStakeAndWithdrawAllowed</h4><div class="body"><code class="signature">function <strong>areStakeAndWithdrawAllowed</strong><span>() </span><span>public </span><span>view </span><span>returns  (bool) </span></code><hr/><div class="description"><p>Determines whether staking/withdrawal operations are allowed at the moment. Used by all staking/withdrawal functions.</p></div><dl><dt><span class="label-return">Returns:</span></dt><dd>bool</dd></dl></div></div></li><li><div class="item function"><span id="claimOrderedWithdraw" class="anchor-marker"></span><h4 class="name">claimOrderedWithdraw</h4><div class="body"><code class="signature">function <strong>claimOrderedWithdraw</strong><span>(address _poolStakingAddress) </span><span>external </span></code><hr/><div class="description"><p>Withdraws the staking tokens/coins from the specified pool ordered during the previous staking epochs with the `orderWithdraw` function. The ordered amount can be retrieved by the `orderedWithdrawAmount` getter.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="base_StakingAuRaBase.html#gasPriceIsValid">gasPriceIsValid </a><a href="base_StakingAuRaBase.html#onlyInitialized">onlyInitialized </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_poolStakingAddress</code> - The staking address of the pool from which the ordered tokens/coins are withdrawn.</div></dd></dl></div></div></li><li><div class="item function"><span id="clearUnremovableValidator" class="anchor-marker"></span><h4 class="name">clearUnremovableValidator</h4><div class="body"><code class="signature">function <strong>clearUnremovableValidator</strong><span>(address _unremovableStakingAddress) </span><span>external </span></code><hr/><div class="description"><p>Adds the `unremovable validator` to either the `poolsToBeElected` or the `poolsToBeRemoved` array depending on their own stake in their own pool when they become removable. This allows the `ValidatorSetAuRa.newValidatorSet` function to recognize the unremovable validator as a regular removable pool. Called by the `ValidatorSet.clearUnremovableValidator` function.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="base_StakingAuRaBase.html#onlyValidatorSetContract">onlyValidatorSetContract </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_unremovableStakingAddress</code> - The staking address of the unremovable validator.</div></dd></dl></div></div></li><li><div class="item function"><span id="fallback" class="anchor-marker"></span><h4 class="name">fallback</h4><div class="body"><code class="signature">function <strong></strong><span>() </span><span>external </span><span>payable </span></code><hr/><div class="description"><p>Fallback function. Prevents direct sending native coins to this contract.</p></div></div></div></li><li><div class="item function"><span id="getPools" class="anchor-marker"></span><h4 class="name">getPools</h4><div class="body"><code class="signature">function <strong>getPools</strong><span>() </span><span>external </span><span>view </span><span>returns  (address[]) </span></code><hr/><div class="description"><p>Returns an array of the current active pools (the staking addresses of candidates and validators). The size of the array cannot exceed MAX_CANDIDATES. A pool can be added to this array with the `_addPoolActive` internal function which is called by the `stake` or `orderWithdraw` function. A pool is considered active if its address has at least the minimum stake and this stake is not ordered to be withdrawn.</p></div><dl><dt><span class="label-return">Returns:</span></dt><dd>address[]</dd></dl></div></div></li><li><div class="item function"><span id="getPoolsInactive" class="anchor-marker"></span><h4 class="name">getPoolsInactive</h4><div class="body"><code class="signature">function <strong>getPoolsInactive</strong><span>() </span><span>external </span><span>view </span><span>returns  (address[]) </span></code><hr/><div class="description"><p>Returns an array of the current inactive pools (the staking addresses of former candidates). A pool can be added to this array with the `_addPoolInactive` internal function which is called by `_removePool`. A pool is considered inactive if it is banned for some reason, if its address has zero stake, or if its entire stake is ordered to be withdrawn.</p></div><dl><dt><span class="label-return">Returns:</span></dt><dd>address[]</dd></dl></div></div></li><li><div class="item function"><span id="getPoolsLikelihood" class="anchor-marker"></span><h4 class="name">getPoolsLikelihood</h4><div class="body"><code class="signature">function <strong>getPoolsLikelihood</strong><span>() </span><span>external </span><span>view </span><span>returns  (uint256[], uint256) </span></code><hr/><div class="description"><p>Returns the array of stake amounts for each corresponding address in the `poolsToBeElected` array (see the `getPoolsToBeElected` getter) and a sum of these amounts. Used by the `ValidatorSetAuRa.newValidatorSet` function when randomly selecting new validators at the last block of a staking epoch. An array value is updated every time any staked amount is changed in this pool (see the `_setLikelihood` internal function).</p></div><dl><dt><span class="label-return">Returns:</span></dt><dd>`uint256[] likelihoods` - The array of the coefficients. The array length is always equal to the length of the `poolsToBeElected` array. `uint256 sum` - The total sum of the amounts.</dd></dl></div></div></li><li><div class="item function"><span id="getPoolsToBeElected" class="anchor-marker"></span><h4 class="name">getPoolsToBeElected</h4><div class="body"><code class="signature">function <strong>getPoolsToBeElected</strong><span>() </span><span>external </span><span>view </span><span>returns  (address[]) </span></code><hr/><div class="description"><p>Returns the list of pools (their staking addresses) which will participate in a new validator set selection process in the `ValidatorSetAuRa.newValidatorSet` function. This is an array of pools which will be considered as candidates when forming a new validator set (at the last block of a staking epoch). This array is kept updated by the `_addPoolToBeElected` and `_deletePoolToBeElected` internal functions.</p></div><dl><dt><span class="label-return">Returns:</span></dt><dd>address[]</dd></dl></div></div></li><li><div class="item function"><span id="getPoolsToBeRemoved" class="anchor-marker"></span><h4 class="name">getPoolsToBeRemoved</h4><div class="body"><code class="signature">function <strong>getPoolsToBeRemoved</strong><span>() </span><span>external </span><span>view </span><span>returns  (address[]) </span></code><hr/><div class="description"><p>Returns the list of pools (their staking addresses) which will be removed by the `ValidatorSetAuRa.newValidatorSet` function from the active `pools` array (at the last block of a staking epoch). This array is kept updated by the `_addPoolToBeRemoved` and `_deletePoolToBeRemoved` internal functions. A pool is added to this array when the pool&#x27;s address withdraws (or orders) all of its own staking tokens from the pool, inactivating the pool.</p></div><dl><dt><span class="label-return">Returns:</span></dt><dd>address[]</dd></dl></div></div></li><li><div class="item function"><span id="getStakerPools" class="anchor-marker"></span><h4 class="name">getStakerPools</h4><div class="body"><code class="signature">function <strong>getStakerPools</strong><span>(address _staker, uint256 _offset, uint256 _length) </span><span>external </span><span>view </span><span>returns  (address[]) </span></code><hr/><div class="description"><p>Returns the list of pools (staking addresses) into which the specified staker have ever staked.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_staker</code> - The staker address (it can be a delegator or a pool staking address itself).</div><div><code>_offset</code> - The index in the array at which the reading should start. Ignored if the `_length` is 0.</div><div><code>_length</code> - The max number of items to return.</div></dd><dt><span class="label-return">Returns:</span></dt><dd>address[]</dd></dl></div></div></li><li><div class="item function"><span id="getStakerPoolsLength" class="anchor-marker"></span><h4 class="name">getStakerPoolsLength</h4><div class="body"><code class="signature">function <strong>getStakerPoolsLength</strong><span>(address _staker) </span><span>external </span><span>view </span><span>returns  (uint256) </span></code><hr/><div class="description"><p>Returns the length of the list of pools into which the specified staker have ever staked.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_staker</code> - The staker address (it can be a delegator or a pool staking address itself).</div></dd><dt><span class="label-return">Returns:</span></dt><dd>uint256</dd></dl></div></div></li><li><div class="item function"><span id="incrementStakingEpoch" class="anchor-marker"></span><h4 class="name">incrementStakingEpoch</h4><div class="body"><code class="signature">function <strong>incrementStakingEpoch</strong><span>() </span><span>external </span></code><hr/><div class="description"><p>Increments the serial number of the current staking epoch. Called by the `ValidatorSetAuRa.newValidatorSet` at the last block of the finished staking epoch.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="base_StakingAuRaBase.html#onlyValidatorSetContract">onlyValidatorSetContract </a></dd></dl></div></div></li><li><div class="item function"><span id="initialValidatorStake" class="anchor-marker"></span><h4 class="name">initialValidatorStake</h4><div class="body"><code class="signature">function <strong>initialValidatorStake</strong><span>(uint256 _totalAmount) </span><span>external </span></code><hr/><div class="description"><p>Makes initial validator stakes. Can only be called by the owner before the network starts (after `initialize` is called but before `stakingEpochStartBlock`). Cannot be called more than once and cannot be called when starting from genesis. Requires `StakingAuRa` contract balance to be equal to the `_totalAmount`.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="upgradeability_UpgradeableOwned.html#onlyOwner">onlyOwner </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_totalAmount</code> - The initial validator total stake amount (for all initial validators).</div></dd></dl></div></div></li><li><div class="item function"><span id="initialize" class="anchor-marker"></span><h4 class="name">initialize</h4><div class="body"><code class="signature">function <strong>initialize</strong><span>(address _validatorSetContract, address[] _initialStakingAddresses, uint256 _delegatorMinStake, uint256 _candidateMinStake, uint256 _stakingEpochDuration, uint256 _stakingEpochStartBlock, uint256 _stakeWithdrawDisallowPeriod) </span><span>external </span></code><hr/><div class="description"><p>Initializes the network parameters. Can only be called by the constructor of the `InitializerAuRa` contract or owner.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_validatorSetContract</code> - The address of the `ValidatorSetAuRa` contract.</div><div><code>_initialStakingAddresses</code> - The array of initial validators&#x27; staking addresses.</div><div><code>_delegatorMinStake</code> - The minimum allowed amount of delegator stake in Wei.</div><div><code>_candidateMinStake</code> - The minimum allowed amount of candidate/validator stake in Wei.</div><div><code>_stakingEpochDuration</code> - The duration of a staking epoch in blocks (e.g., 120954 = 1 week for 5-seconds blocks in AuRa).</div><div><code>_stakingEpochStartBlock</code> - The number of the first block of initial staking epoch (must be zero if the network is starting from genesis block).</div><div><code>_stakeWithdrawDisallowPeriod</code> - The duration period (in blocks) at the end of a staking epoch during which participants cannot stake/withdraw/order/claim their staking tokens/coins (e.g., 4320 = 6 hours for 5-seconds blocks in AuRa).</div></dd></dl></div></div></li><li><div class="item function"><span id="isInitialized" class="anchor-marker"></span><h4 class="name">isInitialized</h4><div class="body"><code class="signature">function <strong>isInitialized</strong><span>() </span><span>public </span><span>view </span><span>returns  (bool) </span></code><hr/><div class="description"><p>Returns a boolean flag indicating if the `initialize` function has been called.</p></div><dl><dt><span class="label-return">Returns:</span></dt><dd>bool</dd></dl></div></div></li><li><div class="item function"><span id="isPoolActive" class="anchor-marker"></span><h4 class="name">isPoolActive</h4><div class="body"><code class="signature">function <strong>isPoolActive</strong><span>(address _stakingAddress) </span><span>public </span><span>view </span><span>returns  (bool) </span></code><hr/><div class="description"><p>Returns a flag indicating whether a specified address is in the `pools` array. See the `getPools` getter.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_stakingAddress</code> - The staking address of the pool.</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bool</dd></dl></div></div></li><li><div class="item function"><span id="maxWithdrawAllowed" class="anchor-marker"></span><h4 class="name">maxWithdrawAllowed</h4><div class="body"><code class="signature">function <strong>maxWithdrawAllowed</strong><span>(address _poolStakingAddress, address _staker) </span><span>public </span><span>view </span><span>returns  (uint256) </span></code><hr/><div class="description"><p>Returns the maximum amount which can be withdrawn from the specified pool by the specified staker at the moment. Used by the `withdraw` and `moveStake` functions.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_poolStakingAddress</code> - The pool staking address from which the withdrawal will be made.</div><div><code>_staker</code> - The staker address that is going to withdraw.</div></dd><dt><span class="label-return">Returns:</span></dt><dd>uint256</dd></dl></div></div></li><li><div class="item function"><span id="maxWithdrawOrderAllowed" class="anchor-marker"></span><h4 class="name">maxWithdrawOrderAllowed</h4><div class="body"><code class="signature">function <strong>maxWithdrawOrderAllowed</strong><span>(address _poolStakingAddress, address _staker) </span><span>public </span><span>view </span><span>returns  (uint256) </span></code><hr/><div class="description"><p>Returns the maximum amount which can be ordered to be withdrawn from the specified pool by the specified staker at the moment. Used by the `orderWithdraw` function.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_poolStakingAddress</code> - The pool staking address from which the withdrawal will be ordered.</div><div><code>_staker</code> - The staker address that is going to order the withdrawal.</div></dd><dt><span class="label-return">Returns:</span></dt><dd>uint256</dd></dl></div></div></li><li><div class="item function"><span id="moveStake" class="anchor-marker"></span><h4 class="name">moveStake</h4><div class="body"><code class="signature">function <strong>moveStake</strong><span>(address _fromPoolStakingAddress, address _toPoolStakingAddress, uint256 _amount) </span><span>external </span></code><hr/><div class="description"><p>Moves staking tokens/coins from one pool to another. A staker calls this function when they want to move their tokens/coins from one pool to another without withdrawing their tokens/coins.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="base_StakingAuRaBase.html#gasPriceIsValid">gasPriceIsValid </a><a href="base_StakingAuRaBase.html#onlyInitialized">onlyInitialized </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_fromPoolStakingAddress</code> - The staking address of the source pool.</div><div><code>_toPoolStakingAddress</code> - The staking address of the target pool.</div><div><code>_amount</code> - The amount of staking tokens/coins to be moved. The amount cannot exceed the value returned by the `maxWithdrawAllowed` getter.</div></dd></dl></div></div></li><li><div class="item function"><span id="onTokenTransfer" class="anchor-marker"></span><h4 class="name">onTokenTransfer</h4><div class="body"><code class="signature">function <strong>onTokenTransfer</strong><span>(address , uint256 , bytes ) </span><span>public </span><span>pure </span><span>returns  (bool) </span></code><hr/><div class="description"><p>Prevents sending tokens directly to the `StakingAuRa` contract address by the `ERC677BridgeTokenRewardable.transferAndCall` function.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code></code> - address</div><div><code></code> - uint256</div><div><code></code> - bytes</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bool</dd></dl></div></div></li><li><div class="item function"><span id="orderWithdraw" class="anchor-marker"></span><h4 class="name">orderWithdraw</h4><div class="body"><code class="signature">function <strong>orderWithdraw</strong><span>(address _poolStakingAddress, int256 _amount) </span><span>external </span></code><hr/><div class="description"><p>Orders tokens/coins withdrawal from the staking address of the specified pool to the staker&#x27;s address. The requested tokens/coins can be claimed after the current staking epoch is complete using the `claimOrderedWithdraw` function.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="base_StakingAuRaBase.html#gasPriceIsValid">gasPriceIsValid </a><a href="base_StakingAuRaBase.html#onlyInitialized">onlyInitialized </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_poolStakingAddress</code> - The staking address of the pool from which the amount will be withdrawn.</div><div><code>_amount</code> - The amount to be withdrawn. A positive value means the staker wants to either set or increase their withdrawal amount. A negative value means the staker wants to decrease a withdrawal amount that was previously set. The amount cannot exceed the value returned by the `maxWithdrawOrderAllowed` getter.</div></dd></dl></div></div></li><li><div class="item function"><span id="poolDelegators" class="anchor-marker"></span><h4 class="name">poolDelegators</h4><div class="body"><code class="signature">function <strong>poolDelegators</strong><span>(address _poolStakingAddress) </span><span>public </span><span>view </span><span>returns  (address[]) </span></code><hr/><div class="description"><p>Returns an array of the current active delegators of the specified pool. A delegator is considered active if they have staked into the specified pool and their stake is not ordered to be withdrawn.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_poolStakingAddress</code> - The pool staking address.</div></dd><dt><span class="label-return">Returns:</span></dt><dd>address[]</dd></dl></div></div></li><li><div class="item function"><span id="poolDelegatorsInactive" class="anchor-marker"></span><h4 class="name">poolDelegatorsInactive</h4><div class="body"><code class="signature">function <strong>poolDelegatorsInactive</strong><span>(address _poolStakingAddress) </span><span>public </span><span>view </span><span>returns  (address[]) </span></code><hr/><div class="description"><p>Returns an array of the current inactive delegators of the specified pool. A delegator is considered inactive if their entire stake is ordered to be withdrawn but not yet claimed.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_poolStakingAddress</code> - The pool staking address.</div></dd><dt><span class="label-return">Returns:</span></dt><dd>address[]</dd></dl></div></div></li><li><div class="item function"><span id="removeMyPool" class="anchor-marker"></span><h4 class="name">removeMyPool</h4><div class="body"><code class="signature">function <strong>removeMyPool</strong><span>() </span><span>external </span></code><hr/><div class="description"><p>Removes the candidate&#x27;s or validator&#x27;s pool from the `pools` array (a list of active pools which can be retrieved by the `getPools` getter). When a candidate or validator wants to remove their pool, they should call this function from their staking address. A validator cannot remove their pool while they are an `unremovable validator`.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="base_StakingAuRaBase.html#gasPriceIsValid">gasPriceIsValid </a><a href="base_StakingAuRaBase.html#onlyInitialized">onlyInitialized </a></dd></dl></div></div></li><li><div class="item function"><span id="removePool" class="anchor-marker"></span><h4 class="name">removePool</h4><div class="body"><code class="signature">function <strong>removePool</strong><span>(address _stakingAddress) </span><span>external </span></code><hr/><div class="description"><p>Removes a specified pool from the `pools` array (a list of active pools which can be retrieved by the `getPools` getter). Called by the `ValidatorSetAuRa._removeMaliciousValidator` internal function when a pool must be removed by the algorithm.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="base_StakingAuRaBase.html#onlyValidatorSetContract">onlyValidatorSetContract </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_stakingAddress</code> - The staking address of the pool to be removed.</div></dd></dl></div></div></li><li><div class="item function"><span id="removePools" class="anchor-marker"></span><h4 class="name">removePools</h4><div class="body"><code class="signature">function <strong>removePools</strong><span>() </span><span>external </span></code><hr/><div class="description"><p>Removes pools which are in the `_poolsToBeRemoved` internal array from the `pools` array. Called by the `ValidatorSetAuRa.newValidatorSet` function when a pool must be removed by the algorithm.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="base_StakingAuRaBase.html#onlyValidatorSetContract">onlyValidatorSetContract </a></dd></dl></div></div></li><li><div class="item function"><span id="setCandidateMinStake" class="anchor-marker"></span><h4 class="name">setCandidateMinStake</h4><div class="body"><code class="signature">function <strong>setCandidateMinStake</strong><span>(uint256 _minStake) </span><span>external </span></code><hr/><div class="description"><p>Sets (updates) the limit of the minimum candidate stake (CANDIDATE_MIN_STAKE). Can only be called by the `owner`.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="upgradeability_UpgradeableOwned.html#onlyOwner">onlyOwner </a><a href="base_StakingAuRaBase.html#onlyInitialized">onlyInitialized </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_minStake</code> - The value of a new limit in Wei.</div></dd></dl></div></div></li><li><div class="item function"><span id="setDelegatorMinStake" class="anchor-marker"></span><h4 class="name">setDelegatorMinStake</h4><div class="body"><code class="signature">function <strong>setDelegatorMinStake</strong><span>(uint256 _minStake) </span><span>external </span></code><hr/><div class="description"><p>Sets (updates) the limit of the minimum delegator stake (DELEGATOR_MIN_STAKE). Can only be called by the `owner`.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="upgradeability_UpgradeableOwned.html#onlyOwner">onlyOwner </a><a href="base_StakingAuRaBase.html#onlyInitialized">onlyInitialized </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_minStake</code> - The value of a new limit in Wei.</div></dd></dl></div></div></li><li><div class="item function"><span id="setStakingEpochStartBlock" class="anchor-marker"></span><h4 class="name">setStakingEpochStartBlock</h4><div class="body"><code class="signature">function <strong>setStakingEpochStartBlock</strong><span>(uint256 _blockNumber) </span><span>external </span></code><hr/><div class="description"><p>Sets the number of the first block in the upcoming staking epoch. Called by the `ValidatorSetAuRa.newValidatorSet` function at the last block of a staking epoch.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="base_StakingAuRaBase.html#onlyValidatorSetContract">onlyValidatorSetContract </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_blockNumber</code> - The number of the very first block in the upcoming staking epoch.</div></dd></dl></div></div></li><li><div class="item function"><span id="stake" class="anchor-marker"></span><h4 class="name">stake</h4><div class="body"><code class="signature">function <strong>stake</strong><span>(address _toPoolStakingAddress, uint256 _amount) </span><span>external </span><span>payable </span></code><hr/><div class="description"><p>Moves the specified amount of staking tokens/coins from the staker&#x27;s address to the staking address of the specified pool. Actually, the amount is stored in a balance of this StakingAuRa contract. A staker calls this function when they want to make a stake into a pool.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_toPoolStakingAddress</code> - The staking address of the pool where the tokens should be staked.</div><div><code>_amount</code> - The amount of tokens to be staked. Ignored when staking in native coins because `msg.value` is used instead.</div></dd></dl></div></div></li><li><div class="item function"><span id="stakeAmountByCurrentEpoch" class="anchor-marker"></span><h4 class="name">stakeAmountByCurrentEpoch</h4><div class="body"><code class="signature">function <strong>stakeAmountByCurrentEpoch</strong><span>(address _poolStakingAddress, address _staker) </span><span>public </span><span>view </span><span>returns  (uint256) </span></code><hr/><div class="description"><p>Returns the amount of staking tokens/coins staked into the specified pool by the specified staker during the current staking epoch (see the `stakingEpoch` getter). Used by the `stake`, `withdraw`, and `orderWithdraw` functions.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_poolStakingAddress</code> - The pool staking address.</div><div><code>_staker</code> - The staker&#x27;s address.</div></dd><dt><span class="label-return">Returns:</span></dt><dd>uint256</dd></dl></div></div></li><li><div class="item function"><span id="stakingEpochEndBlock" class="anchor-marker"></span><h4 class="name">stakingEpochEndBlock</h4><div class="body"><code class="signature">function <strong>stakingEpochEndBlock</strong><span>() </span><span>public </span><span>view </span><span>returns  (uint256) </span></code><hr/><div class="description"><p>Returns the number of the last block of the current staking epoch.</p></div><dl><dt><span class="label-return">Returns:</span></dt><dd>uint256</dd></dl></div></div></li><li><div class="item function"><span id="withdraw" class="anchor-marker"></span><h4 class="name">withdraw</h4><div class="body"><code class="signature">function <strong>withdraw</strong><span>(address _fromPoolStakingAddress, uint256 _amount) </span><span>external </span></code><hr/><div class="description"><p>Moves the specified amount of staking tokens/coins from the staking address of the specified pool to the staker&#x27;s address. A staker calls this function when they want to withdraw their tokens/coins.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="base_StakingAuRaBase.html#gasPriceIsValid">gasPriceIsValid </a><a href="base_StakingAuRaBase.html#onlyInitialized">onlyInitialized </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_fromPoolStakingAddress</code> - The staking address of the pool from which the tokens/coins should be withdrawn.</div><div><code>_amount</code> - The amount of tokens/coins to be withdrawn. The amount cannot exceed the value returned by the `maxWithdrawAllowed` getter.</div></dd></dl></div></div></li></ul></div></div></div>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/posdao-contracts/docs/base_BlockRewardAuRaTokens.html"><span class="arrow-prev">â </span><span class="function-name-prevnext">BlockRewardAuRaTokens</span></a><a class="docs-next button" href="/posdao-contracts/docs/base_StakingAuRaCoins.html"><span class="function-name-prevnext">StakingAuRaCoins</span><span class="arrow-next"> â</span></a></div></div></div></div></div></body></html>